{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/lib/data.ts"],"sourcesContent":["import { Flashcard, LearningTrack, Profile } from \"./types\";\n\nexport const defaultProfile: Profile = {\n  name: \"Tomodachi Learner\",\n  track: \"beginner\",\n  targetMinutes: 20,\n  focuses: [\"reading\", \"listening\"],\n  streakDays: 3,\n  xp: 120\n};\n\nexport const tracks: LearningTrack[] = [\n  {\n    id: \"beginner\",\n    title: \"Beginner Kana\",\n    description: \"Hiragana dan Katakana dasar dengan audio dan kuis cepat.\",\n    units: [\n      {\n        id: \"hiragana-1\",\n        title: \"Hiragana Inti\",\n        status: \"in_progress\",\n        lessons: [\n          {\n            id: \"hi-a\",\n            title: \"A I U E O\",\n            summary: \"Pengenalan bunyi vokal inti dengan audio dasar.\",\n            level: \"beginner\",\n            skillTags: [\"reading\", \"listening\"],\n            estimatedMinutes: 8,\n            audioHint: \"あ い う え お\",\n            quiz: [\n              {\n                id: \"hi-a-q1\",\n                prompt: \"Kana mana untuk bunyi 'a'?\",\n                choices: [\"あ\", \"い\", \"う\", \"お\"],\n                answer: \"あ\",\n                hint: \"Bentuk seperti huruf a dengan tambahan ekor.\"\n              },\n              {\n                id: \"hi-a-q2\",\n                prompt: \"Bunyi untuk kana え?\",\n                choices: [\"e\", \"o\", \"i\", \"u\"],\n                answer: \"e\"\n              }\n            ]\n          },\n          {\n            id: \"hi-k\",\n            title: \"KA KI KU KE KO\",\n            summary: \"Ka Ki Ku Ke Ko dengan latihan dengar → pilih.\",\n            level: \"beginner\",\n            skillTags: [\"listening\", \"reading\"],\n            estimatedMinutes: 10,\n            audioHint: \"か き く け こ\",\n            quiz: [\n              {\n                id: \"hi-k-q1\",\n                prompt: \"Kana mana untuk bunyi 'ke'?\",\n                choices: [\"け\", \"か\", \"こ\", \"く\"],\n                answer: \"け\"\n              },\n              {\n                id: \"hi-k-q2\",\n                prompt: \"Bunyi untuk kana く?\",\n                choices: [\"ku\", \"ko\", \"ka\", \"ke\"],\n                answer: \"ku\"\n              }\n            ]\n          },\n          {\n            id: \"hi-s\",\n            title: \"SA SHI SU SE SO\",\n            summary: \"Konsonan S-line dengan variasi shi.\",\n            level: \"beginner\",\n            skillTags: [\"listening\", \"reading\"],\n            estimatedMinutes: 9,\n            audioHint: \"さ し す せ そ\",\n            quiz: []\n          },\n          {\n            id: \"hi-t\",\n            title: \"TA CHI TSU TE TO\",\n            summary: \"Konsonan T-line dengan chi/tsu.\",\n            level: \"beginner\",\n            skillTags: [\"listening\", \"reading\"],\n            estimatedMinutes: 9,\n            audioHint: \"た ち つ て と\",\n            quiz: []\n          },\n          {\n            id: \"hi-n\",\n            title: \"NA NI NU NE NO\",\n            summary: \"Konsonan N-line.\",\n            level: \"beginner\",\n            skillTags: [\"listening\", \"reading\"],\n            estimatedMinutes: 8,\n            audioHint: \"な に ぬ ね の\",\n            quiz: []\n          },\n          {\n            id: \"hi-h\",\n            title: \"HA HI FU HE HO\",\n            summary: \"Konsonan H-line (fu khusus).\",\n            level: \"beginner\",\n            skillTags: [\"listening\", \"reading\"],\n            estimatedMinutes: 8,\n            audioHint: \"は ひ ふ へ ほ\",\n            quiz: []\n          },\n          {\n            id: \"hi-m\",\n            title: \"MA MI MU ME MO\",\n            summary: \"Konsonan M-line.\",\n            level: \"beginner\",\n            skillTags: [\"listening\", \"reading\"],\n            estimatedMinutes: 8,\n            audioHint: \"ま み む め も\",\n            quiz: []\n          },\n          {\n            id: \"hi-y\",\n            title: \"YA YU YO + N\",\n            summary: \"Semi-vokal Y-line dan ん.\",\n            level: \"beginner\",\n            skillTags: [\"listening\", \"reading\"],\n            estimatedMinutes: 8,\n            audioHint: \"や ゆ よ ん\",\n            quiz: []\n          },\n          {\n            id: \"hi-r\",\n            title: \"RA RI RU RE RO\",\n            summary: \"Konsonan R-line.\",\n            level: \"beginner\",\n            skillTags: [\"listening\", \"reading\"],\n            estimatedMinutes: 8,\n            audioHint: \"ら り る れ ろ\",\n            quiz: []\n          },\n          {\n            id: \"hi-w\",\n            title: \"WA WO + Kombo\",\n            summary: \"WA/WO dan kombo kecil ya/yu/yo.\",\n            level: \"beginner\",\n            skillTags: [\"listening\", \"reading\"],\n            estimatedMinutes: 10,\n            audioHint: \"わ を きゃ きゅ きょ\",\n            quiz: []\n          }\n        ]\n      },\n      {\n        id: \"katakana-1\",\n        title: \"Katakana Dasar\",\n        status: \"not_started\",\n        lessons: [\n          {\n            id: \"ka-a\",\n            title: \"A I U E O (カタカナ)\",\n            summary: \"Vokal dasar untuk kata serapan.\",\n            level: \"beginner\",\n            skillTags: [\"reading\", \"listening\"],\n            estimatedMinutes: 7,\n            audioHint: \"ア イ ウ エ オ\",\n            quiz: [\n              {\n                id: \"ka-a-q1\",\n                prompt: \"Simbol untuk bunyi 'o'?\",\n                choices: [\"オ\", \"イ\", \"エ\", \"ウ\"],\n                answer: \"オ\"\n              },\n              {\n                id: \"ka-a-q2\",\n                prompt: \"Bunyi untuk kana ウ?\",\n                choices: [\"u\", \"o\", \"i\", \"e\"],\n                answer: \"u\"\n              }\n            ]\n          },\n          {\n            id: \"ka-k\",\n            title: \"K-Line Katakana\",\n            summary: \"Ka Ki Ku Ke Ko versi katakana untuk kata pinjaman.\",\n            level: \"beginner\",\n            skillTags: [\"reading\", \"listening\"],\n            estimatedMinutes: 9,\n            audioHint: \"カ キ ク ケ コ\",\n            quiz: [\n              {\n                id: \"ka-k-q1\",\n                prompt: \"Kana untuk bunyi 'ke'?\",\n                choices: [\"ケ\", \"コ\", \"カ\", \"ク\"],\n                answer: \"ケ\"\n              }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"kana-mixed\",\n        title: \"Latihan Campuran\",\n        status: \"not_started\",\n        lessons: [\n          {\n            id: \"mix-words\",\n            title: \"Baca Kata Sederhana\",\n            summary: \"Gabungkan hiragana + katakana untuk kata serapan.\",\n            level: \"beginner\",\n            skillTags: [\"reading\", \"listening\"],\n            estimatedMinutes: 12,\n            audioHint: \"あお/アイス\",\n            quiz: [\n              {\n                id: \"mix-q1\",\n                prompt: \"Baca アイ, arti apa?\",\n                choices: [\"ai (love)\", \"ie (house)\", \"oi (hey)\"],\n                answer: \"ai (love)\"\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  },\n  {\n    id: \"n5\",\n    title: \"N5 Dasar\",\n    description:\n      \"Vocab, grammar, kanji pertama, dan latihan listening/reading campuran.\",\n    units: [\n      {\n        id: \"n5-vocab-1\",\n        title: \"Vocab Kehidupan Harian\",\n        status: \"in_progress\",\n        lessons: [\n          {\n            id: \"n5-v1\",\n            title: \"Salam & Perkenalan\",\n            summary: \"Ohayou, Konnichiwa, Hajimemashite dengan konteks kalimat.\",\n            level: \"n5\",\n            skillTags: [\"listening\", \"speaking\"],\n            estimatedMinutes: 10,\n            audioHint: \"こんにちは\",\n            quiz: [\n              {\n                id: \"n5-v1-q1\",\n                prompt: \"Arti こんにちは?\",\n                choices: [\"Selamat siang\", \"Selamat pagi\", \"Permisi\"],\n                answer: \"Selamat siang\"\n              },\n              {\n                id: \"n5-v1-q2\",\n                prompt: \"Respon tepat untuk はじめまして?\",\n                choices: [\"よろしくお願いします\", \"こんにちは\", \"おはよう\"],\n                answer: \"よろしくお願いします\"\n              }\n            ]\n          },\n          {\n            id: \"n5-v2\",\n            title: \"Angka & Waktu\",\n            summary: \"Hitung 1-10, jam, menit dengan pola sederhana.\",\n            level: \"n5\",\n            skillTags: [\"reading\", \"listening\"],\n            estimatedMinutes: 12,\n            audioHint: \"いち に さん\",\n            quiz: [\n              {\n                id: \"n5-v2-q1\",\n                prompt: \"Bacaan kanji 三?\",\n                choices: [\"san\", \"yon\", \"roku\"],\n                answer: \"san\"\n              }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"n5-grammar-1\",\n        title: \"Pola Kalimat Dasar\",\n        status: \"not_started\",\n        lessons: [\n          {\n            id: \"n5-g1\",\n            title: \"Desu & Partikel Wa\",\n            summary: \"Kalimat nominal sederhana dan topik は.\",\n            level: \"n5\",\n            skillTags: [\"reading\", \"writing\"],\n            estimatedMinutes: 11,\n            audioHint: \"わたし は 田中 です\",\n            quiz: [\n              {\n                id: \"n5-g1-q1\",\n                prompt: \"Partikel untuk penanda topik?\",\n                choices: [\"は\", \"が\", \"を\", \"に\"],\n                answer: \"は\"\n              }\n            ]\n          },\n          {\n            id: \"n5-g2\",\n            title: \"Partikel Objek を\",\n            summary: \"Menyatakan objek langsung.\",\n            level: \"n5\",\n            skillTags: [\"reading\", \"writing\"],\n            estimatedMinutes: 10,\n            audioHint: \"パン を たべます\",\n            quiz: [\n              {\n                id: \"n5-g2-q1\",\n                prompt: \"Kalimat mana yang benar?\",\n                choices: [\n                  \"パン を たべます\",\n                  \"パン は たべます を\",\n                  \"パン を です\"\n                ],\n                answer: \"パン を たべます\"\n              }\n            ]\n          }\n        ]\n      },\n      {\n        id: \"n5-kanji-1\",\n        title: \"Kanji Pertama\",\n        status: \"not_started\",\n        lessons: [\n          {\n            id: \"n5-k1\",\n            title: \"Kanji Dasar: 人, 日, 木\",\n            summary: \"Arti dan bacaan onyomi-kunyomi.\",\n            level: \"n5\",\n            skillTags: [\"reading\", \"writing\"],\n            estimatedMinutes: 9,\n            audioHint: \"ひ と, に ち, き\",\n            quiz: [\n              {\n                id: \"n5-k1-q1\",\n                prompt: \"Arti kanji 人?\",\n                choices: [\"Orang\", \"Hari\", \"Pohon\"],\n                answer: \"Orang\"\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  }\n];\n\nexport const flashcardsSeed: Flashcard[] = [\n  {\n    id: \"fc-a\",\n    prompt: \"あ\",\n    answer: \"a\",\n    level: \"beginner\",\n    ease: 2.5,\n    intervalDays: 1,\n    due: Date.now(),\n    type: \"kana\"\n  },\n  {\n    id: \"fc-ka\",\n    prompt: \"カ\",\n    answer: \"ka\",\n    level: \"beginner\",\n    ease: 2.5,\n    intervalDays: 1,\n    due: Date.now(),\n    type: \"kana\"\n  },\n  {\n    id: \"fc-n5-v1\",\n    prompt: \"こんにちは\",\n    answer: \"selamat siang\",\n    level: \"n5\",\n    ease: 2.3,\n    intervalDays: 1,\n    due: Date.now(),\n    type: \"vocab\"\n  },\n  {\n    id: \"fc-kanji-hito\",\n    prompt: \"人\",\n    answer: \"orang (hito)\",\n    level: \"n5\",\n    ease: 2.2,\n    intervalDays: 1,\n    due: Date.now(),\n    type: \"kanji\"\n  }\n];\n"],"names":[],"mappings":";;;;;;;;AAEO,MAAM,iBAA0B;IACrC,MAAM;IACN,OAAO;IACP,eAAe;IACf,SAAS;QAAC;QAAW;KAAY;IACjC,YAAY;IACZ,IAAI;AACN;AAEO,MAAM,SAA0B;IACrC;QACE,IAAI;QACJ,OAAO;QACP,aAAa;QACb,OAAO;YACL;gBACE,IAAI;gBACJ,OAAO;gBACP,QAAQ;gBACR,SAAS;oBACP;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAW;yBAAY;wBACnC,kBAAkB;wBAClB,WAAW;wBACX,MAAM;4BACJ;gCACE,IAAI;gCACJ,QAAQ;gCACR,SAAS;oCAAC;oCAAK;oCAAK;oCAAK;iCAAI;gCAC7B,QAAQ;gCACR,MAAM;4BACR;4BACA;gCACE,IAAI;gCACJ,QAAQ;gCACR,SAAS;oCAAC;oCAAK;oCAAK;oCAAK;iCAAI;gCAC7B,QAAQ;4BACV;yBACD;oBACH;oBACA;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAa;yBAAU;wBACnC,kBAAkB;wBAClB,WAAW;wBACX,MAAM;4BACJ;gCACE,IAAI;gCACJ,QAAQ;gCACR,SAAS;oCAAC;oCAAK;oCAAK;oCAAK;iCAAI;gCAC7B,QAAQ;4BACV;4BACA;gCACE,IAAI;gCACJ,QAAQ;gCACR,SAAS;oCAAC;oCAAM;oCAAM;oCAAM;iCAAK;gCACjC,QAAQ;4BACV;yBACD;oBACH;oBACA;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAa;yBAAU;wBACnC,kBAAkB;wBAClB,WAAW;wBACX,MAAM,EAAE;oBACV;oBACA;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAa;yBAAU;wBACnC,kBAAkB;wBAClB,WAAW;wBACX,MAAM,EAAE;oBACV;oBACA;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAa;yBAAU;wBACnC,kBAAkB;wBAClB,WAAW;wBACX,MAAM,EAAE;oBACV;oBACA;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAa;yBAAU;wBACnC,kBAAkB;wBAClB,WAAW;wBACX,MAAM,EAAE;oBACV;oBACA;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAa;yBAAU;wBACnC,kBAAkB;wBAClB,WAAW;wBACX,MAAM,EAAE;oBACV;oBACA;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAa;yBAAU;wBACnC,kBAAkB;wBAClB,WAAW;wBACX,MAAM,EAAE;oBACV;oBACA;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAa;yBAAU;wBACnC,kBAAkB;wBAClB,WAAW;wBACX,MAAM,EAAE;oBACV;oBACA;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAa;yBAAU;wBACnC,kBAAkB;wBAClB,WAAW;wBACX,MAAM,EAAE;oBACV;iBACD;YACH;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,QAAQ;gBACR,SAAS;oBACP;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAW;yBAAY;wBACnC,kBAAkB;wBAClB,WAAW;wBACX,MAAM;4BACJ;gCACE,IAAI;gCACJ,QAAQ;gCACR,SAAS;oCAAC;oCAAK;oCAAK;oCAAK;iCAAI;gCAC7B,QAAQ;4BACV;4BACA;gCACE,IAAI;gCACJ,QAAQ;gCACR,SAAS;oCAAC;oCAAK;oCAAK;oCAAK;iCAAI;gCAC7B,QAAQ;4BACV;yBACD;oBACH;oBACA;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAW;yBAAY;wBACnC,kBAAkB;wBAClB,WAAW;wBACX,MAAM;4BACJ;gCACE,IAAI;gCACJ,QAAQ;gCACR,SAAS;oCAAC;oCAAK;oCAAK;oCAAK;iCAAI;gCAC7B,QAAQ;4BACV;yBACD;oBACH;iBACD;YACH;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,QAAQ;gBACR,SAAS;oBACP;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAW;yBAAY;wBACnC,kBAAkB;wBAClB,WAAW;wBACX,MAAM;4BACJ;gCACE,IAAI;gCACJ,QAAQ;gCACR,SAAS;oCAAC;oCAAa;oCAAc;iCAAW;gCAChD,QAAQ;4BACV;yBACD;oBACH;iBACD;YACH;SACD;IACH;IACA;QACE,IAAI;QACJ,OAAO;QACP,aACE;QACF,OAAO;YACL;gBACE,IAAI;gBACJ,OAAO;gBACP,QAAQ;gBACR,SAAS;oBACP;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAa;yBAAW;wBACpC,kBAAkB;wBAClB,WAAW;wBACX,MAAM;4BACJ;gCACE,IAAI;gCACJ,QAAQ;gCACR,SAAS;oCAAC;oCAAiB;oCAAgB;iCAAU;gCACrD,QAAQ;4BACV;4BACA;gCACE,IAAI;gCACJ,QAAQ;gCACR,SAAS;oCAAC;oCAAc;oCAAS;iCAAO;gCACxC,QAAQ;4BACV;yBACD;oBACH;oBACA;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAW;yBAAY;wBACnC,kBAAkB;wBAClB,WAAW;wBACX,MAAM;4BACJ;gCACE,IAAI;gCACJ,QAAQ;gCACR,SAAS;oCAAC;oCAAO;oCAAO;iCAAO;gCAC/B,QAAQ;4BACV;yBACD;oBACH;iBACD;YACH;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,QAAQ;gBACR,SAAS;oBACP;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAW;yBAAU;wBACjC,kBAAkB;wBAClB,WAAW;wBACX,MAAM;4BACJ;gCACE,IAAI;gCACJ,QAAQ;gCACR,SAAS;oCAAC;oCAAK;oCAAK;oCAAK;iCAAI;gCAC7B,QAAQ;4BACV;yBACD;oBACH;oBACA;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAW;yBAAU;wBACjC,kBAAkB;wBAClB,WAAW;wBACX,MAAM;4BACJ;gCACE,IAAI;gCACJ,QAAQ;gCACR,SAAS;oCACP;oCACA;oCACA;iCACD;gCACD,QAAQ;4BACV;yBACD;oBACH;iBACD;YACH;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,QAAQ;gBACR,SAAS;oBACP;wBACE,IAAI;wBACJ,OAAO;wBACP,SAAS;wBACT,OAAO;wBACP,WAAW;4BAAC;4BAAW;yBAAU;wBACjC,kBAAkB;wBAClB,WAAW;wBACX,MAAM;4BACJ;gCACE,IAAI;gCACJ,QAAQ;gCACR,SAAS;oCAAC;oCAAS;oCAAQ;iCAAQ;gCACnC,QAAQ;4BACV;yBACD;oBACH;iBACD;YACH;SACD;IACH;CACD;AAEM,MAAM,iBAA8B;IACzC;QACE,IAAI;QACJ,QAAQ;QACR,QAAQ;QACR,OAAO;QACP,MAAM;QACN,cAAc;QACd,KAAK,KAAK,GAAG;QACb,MAAM;IACR;IACA;QACE,IAAI;QACJ,QAAQ;QACR,QAAQ;QACR,OAAO;QACP,MAAM;QACN,cAAc;QACd,KAAK,KAAK,GAAG;QACb,MAAM;IACR;IACA;QACE,IAAI;QACJ,QAAQ;QACR,QAAQ;QACR,OAAO;QACP,MAAM;QACN,cAAc;QACd,KAAK,KAAK,GAAG;QACb,MAAM;IACR;IACA;QACE,IAAI;QACJ,QAAQ;QACR,QAAQ;QACR,OAAO;QACP,MAAM;QACN,cAAc;QACd,KAAK,KAAK,GAAG;QACb,MAAM;IACR;CACD"}},
    {"offset": {"line": 523, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/lib/api-client.ts"],"sourcesContent":["\"use client\";\n\ntype FetchOptions = {\n  method?: string;\n  body?: unknown;\n  token?: string | null;\n  headers?: Record<string, string>;\n  /**\n   * Force a specific cache mode. Defaults to \"no-store\" to avoid stale data in client fetches.\n   */\n  cache?: RequestCache;\n};\n\nconst BASE_URL =\n  process.env.NEXT_PUBLIC_API_BASE_URL ||\n  (process.env.NODE_ENV !== \"production\"\n    ? \"http://localhost:8080/api/v1\"\n    : \"https://running-abbie-tomodachi-9225d0c4.koyeb.app/api/v1\");\n\nexport async function apiFetch<T>(path: string, options: FetchOptions = {}): Promise<T> {\n  const { method = \"GET\", body, token, headers = {}, cache = \"no-store\" } = options;\n  const res = await fetch(`${BASE_URL}${path}`, {\n    method,\n    cache,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\n      ...headers\n    },\n    body: body ? JSON.stringify(body) : undefined\n  });\n\n  const data = await res.json().catch(() => ({}));\n  if (!res.ok) {\n    const message = (data && (data.error || data.message)) || res.statusText;\n    throw new Error(message);\n  }\n  return data as T;\n}\n\nexport { BASE_URL as API_BASE_URL };\n"],"names":[],"mappings":";;;;;;AAcE;AAdF;AAaA,MAAM,WACJ,2KAAO,CAAC,GAAG,CAAC,wBAAwB,IACpC,CAAC,uCACG,iCACA,uBAA2D;AAE1D,eAAe,SAAY,IAAY,EAAE,UAAwB,CAAC,CAAC;IACxE,MAAM,EAAE,SAAS,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC,EAAE,QAAQ,UAAU,EAAE,GAAG;IAC1E,MAAM,MAAM,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QAC5C;QACA;QACA,SAAS;YACP,gBAAgB;YAChB,GAAI,QAAQ;gBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;YAAC,IAAI,CAAC,CAAC;YACrD,GAAG,OAAO;QACZ;QACA,MAAM,OAAO,KAAK,SAAS,CAAC,QAAQ;IACtC;IAEA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;IAC7C,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,UAAU,AAAC,QAAQ,CAAC,KAAK,KAAK,IAAI,KAAK,OAAO,KAAM,IAAI,UAAU;QACxE,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 561, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/lib/tracks-api.ts"],"sourcesContent":["\"use client\";\n\nimport { apiFetch } from \"./api-client\";\nimport { LearningTrack, TrackUnit } from \"./types\";\n\nexport async function fetchTracks(token: string) {\n  return apiFetch<LearningTrack[]>(\"/tracks\", { token });\n}\n\nexport async function fetchUnits(trackId: string, token: string) {\n  return apiFetch<TrackUnit[]>(`/tracks/${trackId}/units`, { token });\n}\n\nexport async function updateUnitStatus(unitId: string, status: \"in_progress\" | \"completed\", token: string) {\n  return apiFetch(`/units/${unitId}/status`, {\n    method: \"POST\",\n    token,\n    body: { status }\n  });\n}\n\nexport async function fetchNextUnit(trackId: string, token: string) {\n  return apiFetch<{ unit: TrackUnit | null }>(`/tracks/${trackId}/next-unit`, { token });\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AAFA;;AAKO,eAAe,YAAY,KAAa;IAC7C,OAAO,IAAA,0IAAQ,EAAkB,WAAW;QAAE;IAAM;AACtD;AAEO,eAAe,WAAW,OAAe,EAAE,KAAa;IAC7D,OAAO,IAAA,0IAAQ,EAAc,CAAC,QAAQ,EAAE,QAAQ,MAAM,CAAC,EAAE;QAAE;IAAM;AACnE;AAEO,eAAe,iBAAiB,MAAc,EAAE,MAAmC,EAAE,KAAa;IACvG,OAAO,IAAA,0IAAQ,EAAC,CAAC,OAAO,EAAE,OAAO,OAAO,CAAC,EAAE;QACzC,QAAQ;QACR;QACA,MAAM;YAAE;QAAO;IACjB;AACF;AAEO,eAAe,cAAc,OAAe,EAAE,KAAa;IAChE,OAAO,IAAA,0IAAQ,EAA6B,CAAC,QAAQ,EAAE,QAAQ,UAAU,CAAC,EAAE;QAAE;IAAM;AACtF"}},
    {"offset": {"line": 605, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/lib/store/learning-slice.ts"],"sourcesContent":["\"use client\";\n\nimport { createAsyncThunk, createSlice, type PayloadAction } from \"@reduxjs/toolkit\";\nimport { defaultProfile, flashcardsSeed, tracks as trackSeed } from \"../data\";\nimport { fetchTracks, fetchUnits, updateUnitStatus } from \"../tracks-api\";\nimport type { Flashcard, LearningTrack, Profile, TrackKey } from \"../types\";\n\ntype TrackStatus = \"idle\" | \"loading\" | \"succeeded\" | \"failed\";\n\ninterface LearningState {\n  profile: Profile;\n  tracks: LearningTrack[];\n  flashcards: Flashcard[];\n  reviewedToday: number;\n  onboardingComplete: boolean;\n  tracksStatus: TrackStatus;\n  tracksError?: string;\n}\n\nconst initialState: LearningState = {\n  profile: defaultProfile,\n  tracks: trackSeed,\n  flashcards: flashcardsSeed,\n  reviewedToday: 0,\n  onboardingComplete: false,\n  tracksStatus: \"idle\",\n  tracksError: undefined\n};\n\nfunction updateSrs(card: Flashcard, quality: \"again\" | \"good\" | \"easy\"): Flashcard {\n  const qualityScore = quality === \"again\" ? 0 : quality === \"good\" ? 1 : 2;\n  const baseEaseDelta = (qualityScore - 1) * 0.15;\n  const nextEase = Math.max(1.3, card.ease + baseEaseDelta);\n  const nextInterval =\n    quality === \"again\"\n      ? 1\n      : Math.max(1, Math.round(card.intervalDays * (nextEase + (quality === \"easy\" ? 0.15 : 0))));\n  const nextDue = Date.now() + nextInterval * 24 * 60 * 60 * 1000;\n\n  return {\n    ...card,\n    ease: Number(nextEase.toFixed(2)),\n    intervalDays: nextInterval,\n    due: nextDue\n  };\n}\n\nexport const fetchTracksThunk = createAsyncThunk<LearningTrack[], string, { rejectValue: string }>(\n  \"learning/fetchTracks\",\n  async (token, { rejectWithValue }) => {\n    try {\n      const trackList = await fetchTracks(token);\n      const withUnits = await Promise.all(\n        trackList.map(async (track) => {\n          const units = await fetchUnits(track.id, token);\n          return { ...track, units: units.map((u) => ({ ...u, lessons: u.lessons || [] })) };\n        })\n      );\n      return withUnits;\n    } catch (err) {\n      return rejectWithValue(err instanceof Error ? err.message : \"Gagal memuat track\");\n    }\n  }\n);\n\nexport const persistUnitStatusThunk = createAsyncThunk<\n  { trackId: TrackKey; unitId: string; status: \"in_progress\" | \"completed\" },\n  { trackId: TrackKey; unitId: string; status: \"in_progress\" | \"completed\"; token: string },\n  { rejectValue: string }\n>(\"learning/persistUnitStatus\", async ({ trackId, unitId, status, token }, { rejectWithValue }) => {\n  try {\n    await updateUnitStatus(unitId, status, token);\n    return { trackId, unitId, status };\n  } catch (err) {\n    return rejectWithValue(err instanceof Error ? err.message : \"Gagal update status unit\");\n  }\n});\n\nconst learningSlice = createSlice({\n  name: \"learning\",\n  initialState,\n  reducers: {\n    setProfile(state, action: PayloadAction<Profile | undefined>) {\n      state.profile = action.payload ?? defaultProfile;\n    },\n    updateProfile(state, action: PayloadAction<Partial<Profile>>) {\n      state.profile = { ...state.profile, ...action.payload };\n    },\n    markUnit(\n      state,\n      action: PayloadAction<{ trackId: TrackKey; unitId: string; status: \"in_progress\" | \"completed\" }>\n    ) {\n      const { trackId, unitId, status } = action.payload;\n      state.tracks = state.tracks.map((track) =>\n        track.id === trackId\n          ? {\n              ...track,\n              units: track.units.map((unit) =>\n                unit.id === unitId ? { ...unit, status } : unit\n              )\n            }\n          : track\n      );\n    },\n    gradeCard(state, action: PayloadAction<{ cardId: string; quality: \"again\" | \"good\" | \"easy\" }>) {\n      state.flashcards = state.flashcards.map((card) =>\n        card.id === action.payload.cardId ? updateSrs(card, action.payload.quality) : card\n      );\n      const gainedXp = action.payload.quality === \"easy\" ? 12 : action.payload.quality === \"good\" ? 8 : 4;\n      state.reviewedToday += 1;\n      state.profile = { ...state.profile, xp: state.profile.xp + gainedXp };\n    },\n    completeOnboarding(state) {\n      state.onboardingComplete = true;\n    },\n    setOnboardingComplete(state, action: PayloadAction<boolean>) {\n      state.onboardingComplete = action.payload;\n    },\n    setTracks(state, action: PayloadAction<LearningTrack[]>) {\n      state.tracks = action.payload;\n    }\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchTracksThunk.pending, (state) => {\n        state.tracksStatus = \"loading\";\n        state.tracksError = undefined;\n      })\n      .addCase(fetchTracksThunk.fulfilled, (state, action) => {\n        state.tracksStatus = \"succeeded\";\n        state.tracks = action.payload;\n      })\n      .addCase(fetchTracksThunk.rejected, (state, action) => {\n        state.tracksStatus = \"failed\";\n        state.tracksError = action.payload ?? \"Gagal memuat track\";\n      })\n      .addCase(persistUnitStatusThunk.fulfilled, (state, action) => {\n        const { trackId, unitId, status } = action.payload;\n        state.tracks = state.tracks.map((track) =>\n          track.id === trackId\n            ? {\n                ...track,\n                units: track.units.map((unit) =>\n                  unit.id === unitId ? { ...unit, status } : unit\n                )\n              }\n            : track\n        );\n      });\n  }\n});\n\nexport const {\n  setProfile,\n  updateProfile,\n  markUnit,\n  gradeCard,\n  completeOnboarding,\n  setOnboardingComplete,\n  setTracks\n} = learningSlice.actions;\n\nexport default learningSlice.reducer;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 759, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/lib/store/hooks.ts"],"sourcesContent":["\"use client\";\n\nimport { useDispatch, useSelector, type TypedUseSelectorHook } from \"react-redux\";\nimport type { AppDispatch, RootState } from \"./index\";\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n"],"names":[],"mappings":";;;;;;AAEA;;AAFA;;AAKO,MAAM,iBAAiB;;IAAM,OAAA,IAAA,2KAAW;AAAc;GAAhD;;QAAuB,2KAAW;;;AACxC,MAAM,iBAAkD,2KAAW"}},
    {"offset": {"line": 786, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/lib/learning-context.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport {\n  completeOnboarding,\n  gradeCard,\n  markUnit,\n  setOnboardingComplete,\n  setProfile,\n  updateProfile\n} from \"./store/learning-slice\";\nimport { useAppDispatch, useAppSelector } from \"./store/hooks\";\nimport type { Profile, TrackKey } from \"./types\";\n\nexport function LearningProvider({ children }: { children: React.ReactNode }) {\n  return <>{children}</>;\n}\n\nexport function useLearning() {\n  const dispatch = useAppDispatch();\n  const learning = useAppSelector((state) => state.learning);\n\n  const actions = useMemo(\n    () => ({\n      setProfile: (profile?: Profile) => dispatch(setProfile(profile)),\n      updateProfile: (patch: Partial<Profile>) => dispatch(updateProfile(patch)),\n      markUnit: (trackId: TrackKey, unitId: string, status: \"in_progress\" | \"completed\") =>\n        dispatch(markUnit({ trackId, unitId, status })),\n      gradeCard: (cardId: string, quality: \"again\" | \"good\" | \"easy\") =>\n        dispatch(gradeCard({ cardId, quality })),\n      completeOnboarding: () => dispatch(completeOnboarding()),\n      setOnboardingComplete: (value: boolean) => dispatch(setOnboardingComplete(value))\n    }),\n    [dispatch]\n  );\n\n  return { ...learning, ...actions };\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAQA;;;AAXA;;;;AAcO,SAAS,iBAAiB,EAAE,QAAQ,EAAiC;IAC1E,qBAAO;kBAAG;;AACZ;KAFgB;AAIT,SAAS;;IACd,MAAM,WAAW,IAAA,iJAAc;IAC/B,MAAM,WAAW,IAAA,iJAAc;gDAAC,CAAC,QAAU,MAAM,QAAQ;;IAEzD,MAAM,UAAU,IAAA,wKAAO;wCACrB,IAAM,CAAC;gBACL,UAAU;oDAAE,CAAC,UAAsB,SAAS,IAAA,yJAAU,EAAC;;gBACvD,aAAa;oDAAE,CAAC,QAA4B,SAAS,IAAA,4JAAa,EAAC;;gBACnE,QAAQ;oDAAE,CAAC,SAAmB,QAAgB,SAC5C,SAAS,IAAA,uJAAQ,EAAC;4BAAE;4BAAS;4BAAQ;wBAAO;;gBAC9C,SAAS;oDAAE,CAAC,QAAgB,UAC1B,SAAS,IAAA,wJAAS,EAAC;4BAAE;4BAAQ;wBAAQ;;gBACvC,kBAAkB;oDAAE,IAAM,SAAS,IAAA,iKAAkB;;gBACrD,qBAAqB;oDAAE,CAAC,QAAmB,SAAS,IAAA,oKAAqB,EAAC;;YAC5E,CAAC;uCACD;QAAC;KAAS;IAGZ,OAAO;QAAE,GAAG,QAAQ;QAAE,GAAG,OAAO;IAAC;AACnC;GAnBgB;;QACG,iJAAc;QACd,iJAAc"}},
    {"offset": {"line": 865, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/lib/practice-api.ts"],"sourcesContent":["\"use client\";\n\nimport { apiFetch } from \"./api-client\";\nimport { Question } from \"./types\";\n\nexport type PracticeMode = \"beginner\" | \"n5\" | \"kanji\" | \"placement\";\n\nexport type PracticeAttempt = {\n  id: string;\n  userId?: string;\n  score: number;\n  total: number;\n  mode: string;\n  track?: string;\n  createdAt?: string;\n  CreatedAt?: string;\n  created_at?: string;\n};\n\nexport type PracticeAnswerResponse = {\n  questionId: string;\n  questionOrdinal?: number;\n  promptSnapshot?: string;\n  type?: string;\n  selected?: string;\n  correct?: string;\n  isCorrect?: boolean;\n};\n\nexport async function fetchQuestions(mode: PracticeMode, token: string, opts?: { index?: number }) {\n  const params = new URLSearchParams({ mode });\n  if (typeof opts?.index === \"number\") {\n    params.set(\"index\", String(opts.index));\n  }\n  return apiFetch<Question[]>(`/practice/questions?${params.toString()}`, { token });\n}\n\nexport async function submitAnswers(\n  mode: PracticeMode,\n  answers: { questionId: string; selected: string }[],\n  token: string\n) {\n  return apiFetch<{ score: number; total: number; passed: boolean; answers: PracticeAnswerResponse[] }>(\n    \"/practice/submit\",\n    { method: \"POST\", token, body: { mode, answers } }\n  );\n}\n\nexport async function fetchHistory(token: string) {\n  return apiFetch<PracticeAttempt[]>(\"/practice/history\", { token });\n}\n\nexport async function fetchPlacementQuestions(token: string, opts?: { index?: number }) {\n  const params = new URLSearchParams();\n  if (typeof opts?.index === \"number\") {\n    params.set(\"index\", String(opts.index));\n  }\n  const suffix = params.toString() ? `?${params.toString()}` : \"\";\n  return apiFetch<Question[]>(`/placement/questions${suffix}`, { token });\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AAFA;;AA6BO,eAAe,eAAe,IAAkB,EAAE,KAAa,EAAE,IAAyB;IAC/F,MAAM,SAAS,IAAI,gBAAgB;QAAE;IAAK;IAC1C,IAAI,OAAO,MAAM,UAAU,UAAU;QACnC,OAAO,GAAG,CAAC,SAAS,OAAO,KAAK,KAAK;IACvC;IACA,OAAO,IAAA,0IAAQ,EAAa,CAAC,oBAAoB,EAAE,OAAO,QAAQ,IAAI,EAAE;QAAE;IAAM;AAClF;AAEO,eAAe,cACpB,IAAkB,EAClB,OAAmD,EACnD,KAAa;IAEb,OAAO,IAAA,0IAAQ,EACb,oBACA;QAAE,QAAQ;QAAQ;QAAO,MAAM;YAAE;YAAM;QAAQ;IAAE;AAErD;AAEO,eAAe,aAAa,KAAa;IAC9C,OAAO,IAAA,0IAAQ,EAAoB,qBAAqB;QAAE;IAAM;AAClE;AAEO,eAAe,wBAAwB,KAAa,EAAE,IAAyB;IACpF,MAAM,SAAS,IAAI;IACnB,IAAI,OAAO,MAAM,UAAU,UAAU;QACnC,OAAO,GAAG,CAAC,SAAS,OAAO,KAAK,KAAK;IACvC;IACA,MAAM,SAAS,OAAO,QAAQ,KAAK,CAAC,CAAC,EAAE,OAAO,QAAQ,IAAI,GAAG;IAC7D,OAAO,IAAA,0IAAQ,EAAa,CAAC,oBAAoB,EAAE,QAAQ,EAAE;QAAE;IAAM;AACvE"}},
    {"offset": {"line": 921, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/lib/store/dashboard-slice.ts"],"sourcesContent":["\"use client\";\n\nimport { createAsyncThunk, createSlice, type PayloadAction } from \"@reduxjs/toolkit\";\nimport { fetchHistory, type PracticeAttempt } from \"../practice-api\";\nimport { fetchNextUnit } from \"../tracks-api\";\nimport type { TrackKey, TrackUnit } from \"../types\";\n\ninterface DashboardState {\n  history: PracticeAttempt[];\n  nextUnit: TrackUnit | null;\n  loading: boolean;\n  error?: string;\n}\n\nconst initialState: DashboardState = {\n  history: [],\n  nextUnit: null,\n  loading: false,\n  error: undefined\n};\n\nexport const loadDashboardData = createAsyncThunk<\n  { history: PracticeAttempt[]; nextUnit: TrackUnit | null },\n  { token: string; track: TrackKey },\n  { rejectValue: string }\n>(\"dashboard/load\", async ({ token, track }, { rejectWithValue }) => {\n  try {\n    const [history, next] = await Promise.all([fetchHistory(token), fetchNextUnit(track, token)]);\n    return { history: history.slice(0, 5), nextUnit: next.unit || null };\n  } catch (err) {\n    return rejectWithValue(err instanceof Error ? err.message : \"Gagal memuat data beranda\");\n  }\n});\n\nconst dashboardSlice = createSlice({\n  name: \"dashboard\",\n  initialState,\n  reducers: {\n    clearDashboard(state) {\n      state.history = [];\n      state.nextUnit = null;\n      state.error = undefined;\n      state.loading = false;\n    },\n    setNextUnit(state, action: PayloadAction<TrackUnit | null>) {\n      state.nextUnit = action.payload;\n    }\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(loadDashboardData.pending, (state) => {\n        state.loading = true;\n        state.error = undefined;\n      })\n      .addCase(loadDashboardData.fulfilled, (state, action) => {\n        state.loading = false;\n        state.history = action.payload.history;\n        state.nextUnit = action.payload.nextUnit;\n      })\n      .addCase(loadDashboardData.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload ?? \"Gagal memuat data beranda\";\n      });\n  }\n});\n\nexport const { clearDashboard, setNextUnit } = dashboardSlice.actions;\nexport default dashboardSlice.reducer;\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AACA;AACA;AAJA;;;;AAcA,MAAM,eAA+B;IACnC,SAAS,EAAE;IACX,UAAU;IACV,SAAS;IACT,OAAO;AACT;AAEO,MAAM,oBAAoB,IAAA,kNAAgB,EAI/C,kBAAkB,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,eAAe,EAAE;IAC9D,IAAI;QACF,MAAM,CAAC,SAAS,KAAK,GAAG,MAAM,QAAQ,GAAG,CAAC;YAAC,IAAA,gJAAY,EAAC;YAAQ,IAAA,+IAAa,EAAC,OAAO;SAAO;QAC5F,OAAO;YAAE,SAAS,QAAQ,KAAK,CAAC,GAAG;YAAI,UAAU,KAAK,IAAI,IAAI;QAAK;IACrE,EAAE,OAAO,KAAK;QACZ,OAAO,gBAAgB,eAAe,QAAQ,IAAI,OAAO,GAAG;IAC9D;AACF;AAEA,MAAM,iBAAiB,IAAA,6MAAW,EAAC;IACjC,MAAM;IACN;IACA,UAAU;QACR,gBAAe,KAAK;YAClB,MAAM,OAAO,GAAG,EAAE;YAClB,MAAM,QAAQ,GAAG;YACjB,MAAM,KAAK,GAAG;YACd,MAAM,OAAO,GAAG;QAClB;QACA,aAAY,KAAK,EAAE,MAAuC;YACxD,MAAM,QAAQ,GAAG,OAAO,OAAO;QACjC;IACF;IACA,eAAe,CAAC;QACd,QACG,OAAO,CAAC,kBAAkB,OAAO,EAAE,CAAC;YACnC,MAAM,OAAO,GAAG;YAChB,MAAM,KAAK,GAAG;QAChB,GACC,OAAO,CAAC,kBAAkB,SAAS,EAAE,CAAC,OAAO;YAC5C,MAAM,OAAO,GAAG;YAChB,MAAM,OAAO,GAAG,OAAO,OAAO,CAAC,OAAO;YACtC,MAAM,QAAQ,GAAG,OAAO,OAAO,CAAC,QAAQ;QAC1C,GACC,OAAO,CAAC,kBAAkB,QAAQ,EAAE,CAAC,OAAO;YAC3C,MAAM,OAAO,GAAG;YAChB,MAAM,KAAK,GAAG,OAAO,OAAO,IAAI;QAClC;IACJ;AACF;AAEO,MAAM,EAAE,cAAc,EAAE,WAAW,EAAE,GAAG,eAAe,OAAO;uCACtD,eAAe,OAAO"}},
    {"offset": {"line": 995, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/lib/store/auth-slice.ts"],"sourcesContent":["\"use client\";\n\nimport { createAsyncThunk, createSlice, type PayloadAction } from \"@reduxjs/toolkit\";\nimport { apiFetch } from \"../api-client\";\nimport type { Profile } from \"../types\";\nimport { setOnboardingComplete, setProfile as setLearningProfile } from \"./learning-slice\";\n\ntype AuthUser = {\n  id: string;\n  email: string;\n};\n\ntype AuthProfile = (Profile & { onboardingComplete?: boolean }) | null;\n\ntype AuthState = {\n  user: AuthUser | null;\n  profile: AuthProfile;\n  token: string | null;\n  loading: boolean;\n  initialized: boolean;\n  error?: string;\n};\n\nconst TOKEN_KEY = \"auth_token\";\n\ntype MeResponse = {\n  id: string;\n  userId: string;\n  user?: { id: string; email: string };\n  name: string;\n  track: Profile[\"track\"];\n  targetMinutes: number;\n  focuses: Profile[\"focuses\"];\n  streakDays: number;\n  xp: number;\n  onboardingComplete?: boolean;\n};\n\nconst initialState: AuthState = {\n  user: null,\n  profile: null,\n  token: null,\n  loading: true,\n  initialized: false,\n  error: undefined\n};\n\nfunction normalizeProfile(data: MeResponse): Profile & { onboardingComplete?: boolean } {\n  return {\n    name: data.name,\n    track: data.track,\n    targetMinutes: data.targetMinutes,\n    focuses: data.focuses,\n    streakDays: data.streakDays,\n    xp: data.xp,\n    onboardingComplete: data.onboardingComplete\n  };\n}\n\nasync function fetchMe(token: string): Promise<{ user: AuthUser; profile: Profile & { onboardingComplete?: boolean } }> {\n  const data = await apiFetch<MeResponse>(\"/auth/me\", { token });\n  const profile = normalizeProfile(data);\n  const pickedUser = data.user ? { id: data.user.id, email: data.user.email } : { id: data.userId, email: \"\" };\n  return { user: pickedUser, profile };\n}\n\nexport const bootstrapAuth = createAsyncThunk<\n  { token: string | null; user: AuthUser | null; profile: AuthProfile },\n  void,\n  { rejectValue: string }\n>(\"auth/bootstrap\", async (_, { dispatch, rejectWithValue }) => {\n  const stored = typeof window !== \"undefined\" ? localStorage.getItem(TOKEN_KEY) : null;\n  if (!stored) {\n    dispatch(setLearningProfile(undefined));\n    dispatch(setOnboardingComplete(false));\n    return { token: null, user: null, profile: null };\n  }\n  try {\n    const { user, profile } = await fetchMe(stored);\n    dispatch(setLearningProfile(profile));\n    dispatch(setOnboardingComplete(Boolean(profile.onboardingComplete)));\n    return { token: stored, user, profile };\n  } catch (err) {\n    if (typeof window !== \"undefined\") localStorage.removeItem(TOKEN_KEY);\n    return rejectWithValue(err instanceof Error ? err.message : \"Gagal memuat profil\");\n  }\n});\n\nexport const loginThunk = createAsyncThunk<\n  { token: string; user: AuthUser; profile: AuthProfile },\n  { email: string; password: string },\n  { rejectValue: string }\n>(\"auth/login\", async ({ email, password }, { dispatch, rejectWithValue }) => {\n  try {\n    const resp = await apiFetch<{ token: string; user: AuthUser }>(\"/auth/login\", {\n      method: \"POST\",\n      body: { email, password }\n    });\n    const { profile } = await fetchMe(resp.token);\n    if (typeof window !== \"undefined\") localStorage.setItem(TOKEN_KEY, resp.token);\n    if (profile) {\n      dispatch(setLearningProfile(profile));\n      dispatch(setOnboardingComplete(Boolean(profile.onboardingComplete)));\n    }\n    return { token: resp.token, user: resp.user, profile };\n  } catch (err) {\n    return rejectWithValue(err instanceof Error ? err.message : \"Gagal masuk\");\n  }\n});\n\nexport const signupThunk = createAsyncThunk<\n  { token: string; user: AuthUser; profile: AuthProfile },\n  { name: string; email: string; password: string },\n  { rejectValue: string }\n>(\"auth/signup\", async ({ name, email, password }, { dispatch, rejectWithValue }) => {\n  try {\n    const resp = await apiFetch<{ token: string; user: AuthUser }>(\"/auth/signup\", {\n      method: \"POST\",\n      body: { name, email, password }\n    });\n    const { profile } = await fetchMe(resp.token);\n    if (typeof window !== \"undefined\") localStorage.setItem(TOKEN_KEY, resp.token);\n    if (profile) {\n      dispatch(setLearningProfile(profile));\n      dispatch(setOnboardingComplete(Boolean(profile.onboardingComplete)));\n    }\n    return { token: resp.token, user: resp.user, profile };\n  } catch (err) {\n    return rejectWithValue(err instanceof Error ? err.message : \"Gagal daftar\");\n  }\n});\n\nexport const refreshProfileThunk = createAsyncThunk<\n  AuthProfile,\n  { token: string },\n  { rejectValue: string }\n>(\"auth/refreshProfile\", async ({ token }, { dispatch, rejectWithValue }) => {\n  try {\n    const { profile } = await fetchMe(token);\n    dispatch(setLearningProfile(profile));\n    dispatch(setOnboardingComplete(Boolean(profile?.onboardingComplete)));\n    return profile;\n  } catch (err) {\n    return rejectWithValue(err instanceof Error ? err.message : \"Gagal memuat profil\");\n  }\n});\n\nexport const logoutThunk = createAsyncThunk(\"auth/logout\", async (_, { dispatch }) => {\n  if (typeof window !== \"undefined\") localStorage.removeItem(TOKEN_KEY);\n  dispatch(setLearningProfile(undefined));\n  dispatch(setOnboardingComplete(false));\n});\n\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    clearAuthError(state) {\n      state.error = undefined;\n    },\n    setToken(state, action: PayloadAction<string | null>) {\n      state.token = action.payload;\n    }\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(bootstrapAuth.pending, (state) => {\n        state.loading = true;\n        state.error = undefined;\n      })\n      .addCase(bootstrapAuth.fulfilled, (state, action) => {\n        state.loading = false;\n        state.initialized = true;\n        state.token = action.payload.token;\n        state.user = action.payload.user;\n        state.profile = action.payload.profile;\n      })\n      .addCase(bootstrapAuth.rejected, (state, action) => {\n        state.loading = false;\n        state.initialized = true;\n        state.token = null;\n        state.user = null;\n        state.profile = null;\n        state.error = action.payload ?? \"Gagal memuat profil\";\n      })\n      .addCase(loginThunk.pending, (state) => {\n        state.loading = true;\n        state.error = undefined;\n      })\n      .addCase(loginThunk.fulfilled, (state, action) => {\n        state.loading = false;\n        state.token = action.payload.token;\n        state.user = action.payload.user;\n        state.profile = action.payload.profile;\n      })\n      .addCase(loginThunk.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload ?? \"Gagal masuk\";\n      })\n      .addCase(signupThunk.pending, (state) => {\n        state.loading = true;\n        state.error = undefined;\n      })\n      .addCase(signupThunk.fulfilled, (state, action) => {\n        state.loading = false;\n        state.token = action.payload.token;\n        state.user = action.payload.user;\n        state.profile = action.payload.profile;\n      })\n      .addCase(signupThunk.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload ?? \"Gagal daftar\";\n      })\n      .addCase(refreshProfileThunk.pending, (state) => {\n        state.loading = true;\n      })\n      .addCase(refreshProfileThunk.fulfilled, (state, action) => {\n        state.loading = false;\n        state.profile = action.payload;\n      })\n      .addCase(refreshProfileThunk.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload ?? \"Gagal memuat profil\";\n      })\n      .addCase(logoutThunk.fulfilled, (state) => {\n        state.token = null;\n        state.user = null;\n        state.profile = null;\n        state.error = undefined;\n        state.loading = false;\n        state.initialized = true;\n      });\n  }\n});\n\nexport const { clearAuthError, setToken } = authSlice.actions;\nexport default authSlice.reducer;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1223, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/lib/auth-context.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo } from \"react\";\nimport { clearDashboard } from \"./store/dashboard-slice\";\nimport {\n  bootstrapAuth,\n  loginThunk,\n  logoutThunk,\n  refreshProfileThunk,\n  signupThunk\n} from \"./store/auth-slice\";\nimport { useAppDispatch, useAppSelector } from \"./store/hooks\";\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    dispatch(bootstrapAuth());\n  }, [dispatch]);\n\n  return <>{children}</>;\n}\n\nexport function useAuth() {\n  const dispatch = useAppDispatch();\n  const auth = useAppSelector((state) => state.auth);\n\n  const actions = useMemo(\n    () => ({\n      login: (params: { email: string; password: string }) => dispatch(loginThunk(params)).unwrap(),\n      signup: (params: { name: string; email: string; password: string }) => dispatch(signupThunk(params)).unwrap(),\n      logout: () => {\n        void dispatch(logoutThunk());\n        dispatch(clearDashboard());\n      },\n      refreshProfile: () => {\n        if (!auth.token) return Promise.resolve();\n        return dispatch(refreshProfileThunk({ token: auth.token })).unwrap();\n      }\n    }),\n    [auth.token, dispatch]\n  );\n\n  return { ...auth, ...actions };\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AAOA;;;AAXA;;;;;AAaO,SAAS,aAAa,EAAE,QAAQ,EAAiC;;IACtE,MAAM,WAAW,IAAA,iJAAc;IAE/B,IAAA,0KAAS;kCAAC;YACR,SAAS,IAAA,wJAAa;QACxB;iCAAG;QAAC;KAAS;IAEb,qBAAO;kBAAG;;AACZ;GARgB;;QACG,iJAAc;;;KADjB;AAUT,SAAS;;IACd,MAAM,WAAW,IAAA,iJAAc;IAC/B,MAAM,OAAO,IAAA,iJAAc;wCAAC,CAAC,QAAU,MAAM,IAAI;;IAEjD,MAAM,UAAU,IAAA,wKAAO;oCACrB,IAAM,CAAC;gBACL,KAAK;gDAAE,CAAC,SAAgD,SAAS,IAAA,qJAAU,EAAC,SAAS,MAAM;;gBAC3F,MAAM;gDAAE,CAAC,SAA8D,SAAS,IAAA,sJAAW,EAAC,SAAS,MAAM;;gBAC3G,MAAM;gDAAE;wBACN,KAAK,SAAS,IAAA,sJAAW;wBACzB,SAAS,IAAA,8JAAc;oBACzB;;gBACA,cAAc;gDAAE;wBACd,IAAI,CAAC,KAAK,KAAK,EAAE,OAAO,QAAQ,OAAO;wBACvC,OAAO,SAAS,IAAA,8JAAmB,EAAC;4BAAE,OAAO,KAAK,KAAK;wBAAC,IAAI,MAAM;oBACpE;;YACF,CAAC;mCACD;QAAC,KAAK,KAAK;QAAE;KAAS;IAGxB,OAAO;QAAE,GAAG,IAAI;QAAE,GAAG,OAAO;IAAC;AAC/B;IArBgB;;QACG,iJAAc;QAClB,iJAAc"}},
    {"offset": {"line": 1314, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/lib/store/index.ts"],"sourcesContent":["\"use client\";\n\nimport { configureStore } from \"@reduxjs/toolkit\";\nimport authReducer from \"./auth-slice\";\nimport dashboardReducer from \"./dashboard-slice\";\nimport learningReducer from \"./learning-slice\";\n\nexport const store = configureStore({\n  reducer: {\n    auth: authReducer,\n    dashboard: dashboardReducer,\n    learning: learningReducer\n  }\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;AAOO,MAAM,QAAQ,IAAA,gNAAc,EAAC;IAClC,SAAS;QACP,MAAM,kJAAW;QACjB,WAAW,uJAAgB;QAC3B,UAAU,sJAAe;IAC3B;AACF"}},
    {"offset": {"line": 1341, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/lib/store/StoreProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport { Provider } from \"react-redux\";\nimport { store } from \"./index\";\n\nexport function StoreProvider({ children }: { children: React.ReactNode }) {\n  return <Provider store={store}>{children}</Provider>;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKO,SAAS,cAAc,EAAE,QAAQ,EAAiC;IACvE,qBAAO,6LAAC,wKAAQ;QAAC,OAAO,wIAAK;kBAAG;;;;;;AAClC;KAFgB"}}]
}