{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/components/ui/button.tsx"],"sourcesContent":["import { ComponentProps } from \"react\";\nimport { twMerge } from \"tailwind-merge\";\n\ntype ButtonProps = ComponentProps<\"button\"> & {\n  variant?: \"primary\" | \"ghost\" | \"outline\";\n};\n\nexport function Button({\n  variant = \"primary\",\n  className,\n  ...props\n}: ButtonProps) {\n  const base =\n    \"inline-flex items-center justify-center gap-2 rounded-full px-4 py-2 text-sm font-semibold shadow-sm transition duration-150 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed active:translate-y-[1px]\";\n  const variants: Record<NonNullable<ButtonProps[\"variant\"]>, string> = {\n    primary:\n      \"bg-gradient-to-r from-brand-600 via-brand-500 to-brand-600 text-white hover:shadow-lg hover:shadow-brand-500/25 focus-visible:ring-brand-400\",\n    ghost: \"text-brand-700 hover:bg-brand-50 focus-visible:ring-brand-200\",\n    outline:\n      \"border border-slate-200 bg-white text-slate-800 hover:border-brand-200 hover:bg-slate-50 focus-visible:ring-brand-100\"\n  };\n\n  return (\n    <button\n      className={twMerge(base, variants[variant], className)}\n      {...props}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAMO,SAAS,OAAO,EACrB,UAAU,SAAS,EACnB,SAAS,EACT,GAAG,OACS;IACZ,MAAM,OACJ;IACF,MAAM,WAAgE;QACpE,SACE;QACF,OAAO;QACP,SACE;IACJ;IAEA,qBACE,8OAAC;QACC,WAAW,IAAA,sKAAO,EAAC,MAAM,QAAQ,CAAC,QAAQ,EAAE;QAC3C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/components/ui/card.tsx"],"sourcesContent":["import { ComponentProps } from \"react\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function Card({ className, ...props }: ComponentProps<\"div\">) {\n  return (\n    <div\n      className={twMerge(\n        \"card border border-slate-100 bg-white p-4 shadow-card\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAEO,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAA8B;IACjE,qBACE,8OAAC;QACC,WAAW,IAAA,sKAAO,EAChB,yDACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/components/ui/badge.tsx"],"sourcesContent":["import { ComponentProps } from \"react\";\nimport { twMerge } from \"tailwind-merge\";\n\ntype BadgeProps = ComponentProps<\"span\"> & {\n  tone?: \"info\" | \"success\" | \"warning\";\n};\n\nexport function Badge({ className, tone = \"info\", ...props }: BadgeProps) {\n  const tones: Record<NonNullable<BadgeProps[\"tone\"]>, string> = {\n    info: \"bg-brand-50 text-brand-700 border-brand-100\",\n    success: \"bg-green-50 text-green-700 border-green-100\",\n    warning: \"bg-amber-50 text-amber-700 border-amber-200\"\n  };\n\n  return (\n    <span\n      className={twMerge(\n        \"inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold\",\n        tones[tone],\n        className\n      )}\n      {...props}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAMO,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,MAAM,EAAE,GAAG,OAAmB;IACtE,MAAM,QAAyD;QAC7D,MAAM;QACN,SAAS;QACT,SAAS;IACX;IAEA,qBACE,8OAAC;QACC,WAAW,IAAA,sKAAO,EAChB,gFACA,KAAK,CAAC,KAAK,EACX;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/lib/profile-api.ts"],"sourcesContent":["\"use client\";\n\nimport { apiFetch } from \"./api-client\";\nimport type { Profile } from \"./types\";\n\nexport async function updateProfileApi(\n  payload: Partial<Pick<Profile, \"name\" | \"track\" | \"targetMinutes\" | \"focuses\">>,\n  token: string\n) {\n  return apiFetch<Profile>(\"/profile\", { method: \"PUT\", body: payload, token });\n}\n\nexport async function completeOnboardingApi(token: string) {\n  return apiFetch<void>(\"/profile/complete-onboarding\", { method: \"POST\", token });\n}\n"],"names":[],"mappings":";;;;;;AAEA;AAFA;;AAKO,eAAe,iBACpB,OAA+E,EAC/E,KAAa;IAEb,OAAO,IAAA,uIAAQ,EAAU,YAAY;QAAE,QAAQ;QAAO,MAAM;QAAS;IAAM;AAC7E;AAEO,eAAe,sBAAsB,KAAa;IACvD,OAAO,IAAA,uIAAQ,EAAO,gCAAgC;QAAE,QAAQ;QAAQ;IAAM;AAChF"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/components/onboarding/OnboardingPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useLearning } from \"@/lib/learning-context\";\nimport { SkillFocus, TrackKey } from \"@/lib/types\";\nimport { Button } from \"../ui/button\";\nimport { Card } from \"../ui/card\";\nimport { Badge } from \"../ui/badge\";\nimport { useAuth } from \"@/lib/auth-context\";\nimport { completeOnboardingApi, updateProfileApi } from \"@/lib/profile-api\";\n\nconst skillOptions: { value: SkillFocus; label: string }[] = [\n  { value: \"reading\", label: \"Reading\" },\n  { value: \"listening\", label: \"Listening\" },\n  { value: \"writing\", label: \"Writing\" },\n  { value: \"speaking\", label: \"Speaking\" }\n];\n\nexport function OnboardingPanel() {\n  const { profile, updateProfile, completeOnboarding, setProfile, setOnboardingComplete } = useLearning();\n  const { token } = useAuth();\n  const [localName, setLocalName] = useState(profile.name);\n  const [targetMinutes, setTargetMinutes] = useState(profile.targetMinutes);\n  const [selectedFocuses, setSelectedFocuses] = useState<SkillFocus[]>(profile.focuses);\n  const [track, setTrack] = useState<TrackKey>(profile.track);\n  const [saving, setSaving] = useState(false);\n\n  const toggleFocus = (focus: SkillFocus) => {\n    setSelectedFocuses((prev) =>\n      prev.includes(focus) ? prev.filter((f) => f !== focus) : [...prev, focus]\n    );\n  };\n\n  const handleSave = async () => {\n    const payload = {\n      name: localName || profile.name,\n      track,\n      targetMinutes,\n      focuses: selectedFocuses\n    };\n\n    if (!token) {\n      updateProfile(payload);\n      completeOnboarding();\n      setOnboardingComplete(true);\n      return;\n    }\n\n    try {\n      setSaving(true);\n      const updated = await updateProfileApi(payload, token);\n      setProfile(updated);\n      setOnboardingComplete(true);\n      completeOnboarding();\n      await completeOnboardingApi(token);\n    } catch (err) {\n      // Fallback to local update if server fails so user progress not blocked.\n      updateProfile(payload);\n      completeOnboarding();\n      setOnboardingComplete(true);\n      alert(err instanceof Error ? err.message : \"Gagal menyimpan preferensi\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <Card className=\"space-y-4\">\n      <div className=\"flex flex-wrap items-center justify-between gap-3\">\n        <div>\n          <p className=\"section-title\">Onboarding & Profil</p>\n          <p className=\"muted\">Pilih jalur: Beginner (kana) atau N5 konten dasar.</p>\n        </div>\n        <Badge tone=\"info\">Step 1</Badge>\n      </div>\n\n      <div className=\"grid gap-3 sm:grid-cols-2\">\n        <label className=\"space-y-1 text-sm\">\n          <span className=\"text-slate-700\">Nama tampilan</span>\n          <input\n            value={localName}\n            onChange={(e) => setLocalName(e.target.value)}\n            className=\"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:border-brand-400 focus:outline-none\"\n            placeholder=\"Isi nama kamu\"\n          />\n        </label>\n        <label className=\"space-y-1 text-sm\">\n          <span className=\"text-slate-700\">Target harian (menit)</span>\n          <input\n            type=\"number\"\n            min={5}\n            max={90}\n            value={targetMinutes}\n            onChange={(e) => setTargetMinutes(Number(e.target.value))}\n            className=\"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:border-brand-400 focus:outline-none\"\n          />\n        </label>\n      </div>\n\n      <div className=\"grid gap-3 sm:grid-cols-2\">\n        <div className=\"space-y-2\">\n          <p className=\"text-sm font-semibold text-slate-800\">Pilih jalur</p>\n          <div className=\"grid grid-cols-2 gap-2\">\n            <button\n              type=\"button\"\n              onClick={() => setTrack(\"beginner\")}\n              className={`rounded-lg border px-3 py-3 text-left text-sm ${\n                track === \"beginner\"\n                  ? \"border-brand-500 bg-brand-50 text-brand-700\"\n                  : \"border-slate-200 hover:border-slate-300\"\n              }`}\n            >\n              <div className=\"font-semibold\">Beginner</div>\n              <p className=\"text-xs text-slate-500\">Hiragana & Katakana dasar</p>\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setTrack(\"n5\")}\n              className={`rounded-lg border px-3 py-3 text-left text-sm ${\n                track === \"n5\"\n                  ? \"border-brand-500 bg-brand-50 text-brand-700\"\n                  : \"border-slate-200 hover:border-slate-300\"\n              }`}\n            >\n              <div className=\"font-semibold\">N5</div>\n              <p className=\"text-xs text-slate-500\">Vocab, kanji, grammar dasar</p>\n            </button>\n          </div>\n          <p className=\"text-xs text-slate-500\">\n            Beginner fokus kana saja; konten lain lanjut di jalur N5.\n          </p>\n        </div>\n\n        <div className=\"space-y-2\">\n          <p className=\"text-sm font-semibold text-slate-800\">Fokus skill</p>\n          <div className=\"flex flex-wrap gap-2\">\n            {skillOptions.map((skill) => {\n              const active = selectedFocuses.includes(skill.value);\n              return (\n                <button\n                  key={skill.value}\n                  type=\"button\"\n                  onClick={() => toggleFocus(skill.value)}\n                  className={`rounded-full border px-3 py-1 text-xs font-semibold ${\n                    active\n                      ? \"border-brand-500 bg-brand-50 text-brand-700\"\n                      : \"border-slate-200 text-slate-700 hover:border-slate-300\"\n                  }`}\n                >\n                  {skill.label}\n                </button>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex flex-wrap items-center justify-between gap-3\">\n        <div>\n          <p className=\"text-sm font-semibold text-slate-800\">Status saat ini</p>\n          <p className=\"text-xs text-slate-500\">\n            {profile.name} · {profile.focuses.join(\", \")} · {profile.targetMinutes}m/hari\n          </p>\n        </div>\n        <Button className=\"px-4\" onClick={handleSave} disabled={saving}>\n          {saving ? \"Menyimpan...\" : \"Simpan preferensi\"}\n        </Button>\n      </div>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 494, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/components/ui/progress.tsx"],"sourcesContent":["import { twMerge } from \"tailwind-merge\";\n\nexport function ProgressBar({\n  value,\n  max = 100,\n  label\n}: {\n  value: number;\n  max?: number;\n  label?: string;\n}) {\n  const pct = Math.min(100, Math.round((value / max) * 100));\n  return (\n    <div className=\"space-y-2\">\n      {label ? <div className=\"text-sm text-slate-600\">{label}</div> : null}\n      <div className=\"h-3 w-full overflow-hidden rounded-full bg-slate-100\">\n        <div\n          className={twMerge(\n            \"h-full rounded-full bg-brand-500 transition-all duration-300\"\n          )}\n          style={{ width: `${pct}%` }}\n          aria-valuemin={0}\n          aria-valuemax={max}\n          aria-valuenow={value}\n          role=\"progressbar\"\n        />\n      </div>\n      <div className=\"text-xs text-slate-500\">{pct}% selesai</div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAEO,SAAS,YAAY,EAC1B,KAAK,EACL,MAAM,GAAG,EACT,KAAK,EAKN;IACC,MAAM,MAAM,KAAK,GAAG,CAAC,KAAK,KAAK,KAAK,CAAC,AAAC,QAAQ,MAAO;IACrD,qBACE,8OAAC;QAAI,WAAU;;YACZ,sBAAQ,8OAAC;gBAAI,WAAU;0BAA0B;;;;;uBAAe;0BACjE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,WAAW,IAAA,sKAAO,EAChB;oBAEF,OAAO;wBAAE,OAAO,GAAG,IAAI,CAAC,CAAC;oBAAC;oBAC1B,iBAAe;oBACf,iBAAe;oBACf,iBAAe;oBACf,MAAK;;;;;;;;;;;0BAGT,8OAAC;gBAAI,WAAU;;oBAA0B;oBAAI;;;;;;;;;;;;;AAGnD"}},
    {"offset": {"line": 558, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/components/profile/ProfileSummary.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { useLearning } from \"@/lib/learning-context\";\nimport { Badge } from \"../ui/badge\";\nimport { Card } from \"../ui/card\";\nimport { ProgressBar } from \"../ui/progress\";\n\nexport function ProfileSummary() {\n  const { profile, tracks, reviewedToday } = useLearning();\n\n  const trackProgress = useMemo(() => {\n    return tracks.map((track) => {\n      const totalUnits = track.units.length;\n      const completed = track.units.filter((u) => u.status === \"completed\").length;\n      const inProgress = track.units.filter((u) => u.status === \"in_progress\").length;\n      return {\n        id: track.id,\n        title: track.title,\n        completed,\n        totalUnits,\n        inProgress\n      };\n    });\n  }, [tracks]);\n\n  return (\n    <Card className=\"space-y-5\">\n      <div className=\"flex flex-wrap items-center justify-between gap-3 rounded-xl bg-gradient-to-r from-brand-500/10 via-white to-brand-100/60 p-4\">\n        <div>\n          <p className=\"section-title\">Halo, {profile.name}</p>\n          <p className=\"muted\">\n            Track aktif: {profile.track === \"beginner\" ? \"Beginner (kana)\" : \"N5\"} · Fokus:{\" \"}\n            {profile.focuses.join(\", \")}\n          </p>\n        </div>\n        <Badge tone=\"success\">Streak {profile.streakDays} hari</Badge>\n      </div>\n\n      <div className=\"grid gap-3 sm:grid-cols-3\">\n        <div className=\"rounded-lg bg-brand-50 px-4 py-3 text-brand-800\">\n          <p className=\"text-xs uppercase tracking-wide text-brand-700/80\">XP</p>\n          <p className=\"text-2xl font-bold\">{profile.xp}</p>\n          <p className=\"text-xs\">+{reviewedToday * 8} dari review hari ini</p>\n        </div>\n        <div className=\"rounded-lg bg-slate-50 px-4 py-3 text-slate-800\">\n          <p className=\"text-xs uppercase tracking-wide text-slate-600\">Target harian</p>\n          <p className=\"text-2xl font-bold\">{profile.targetMinutes}m</p>\n          <p className=\"text-xs\">Fokus: {profile.focuses.join(\", \")}</p>\n        </div>\n        <div className=\"rounded-lg bg-green-50 px-4 py-3 text-green-800\">\n          <p className=\"text-xs uppercase tracking-wide text-green-700/90\">Review selesai</p>\n          <p className=\"text-2xl font-bold\">{reviewedToday}</p>\n          <p className=\"text-xs\">Kartu hari ini</p>\n        </div>\n      </div>\n\n      <div className=\"grid gap-3 sm:grid-cols-2\">\n        {trackProgress.map((progress) => (\n          <div\n            key={progress.id}\n            className=\"rounded-xl border border-slate-100 bg-slate-50 p-4\"\n          >\n            <div className=\"flex items-center justify-between\">\n              <p className=\"text-sm font-semibold text-slate-800\">{progress.title}</p>\n              <Badge tone={progress.completed > 0 ? \"success\" : \"info\"}>\n                {progress.completed}/{progress.totalUnits} unit\n              </Badge>\n            </div>\n            <div className=\"mt-3\">\n              <ProgressBar\n                value={progress.completed + progress.inProgress * 0.5}\n                max={progress.totalUnits}\n              />\n              <p className=\"mt-1 text-xs text-slate-500\">\n                {progress.inProgress} unit on-going · {progress.completed} selesai\n              </p>\n            </div>\n          </div>\n        ))}\n      </div>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQO,SAAS;IACd,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,iJAAW;IAEtD,MAAM,gBAAgB,IAAA,gNAAO,EAAC;QAC5B,OAAO,OAAO,GAAG,CAAC,CAAC;YACjB,MAAM,aAAa,MAAM,KAAK,CAAC,MAAM;YACrC,MAAM,YAAY,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,aAAa,MAAM;YAC5E,MAAM,aAAa,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,eAAe,MAAM;YAC/E,OAAO;gBACL,IAAI,MAAM,EAAE;gBACZ,OAAO,MAAM,KAAK;gBAClB;gBACA;gBACA;YACF;QACF;IACF,GAAG;QAAC;KAAO;IAEX,qBACE,8OAAC,wIAAI;QAAC,WAAU;;0BACd,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CACC,8OAAC;gCAAE,WAAU;;oCAAgB;oCAAO,QAAQ,IAAI;;;;;;;0CAChD,8OAAC;gCAAE,WAAU;;oCAAQ;oCACL,QAAQ,KAAK,KAAK,aAAa,oBAAoB;oCAAK;oCAAU;oCAC/E,QAAQ,OAAO,CAAC,IAAI,CAAC;;;;;;;;;;;;;kCAG1B,8OAAC,0IAAK;wBAAC,MAAK;;4BAAU;4BAAQ,QAAQ,UAAU;4BAAC;;;;;;;;;;;;;0BAGnD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAAoD;;;;;;0CACjE,8OAAC;gCAAE,WAAU;0CAAsB,QAAQ,EAAE;;;;;;0CAC7C,8OAAC;gCAAE,WAAU;;oCAAU;oCAAE,gBAAgB;oCAAE;;;;;;;;;;;;;kCAE7C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAAiD;;;;;;0CAC9D,8OAAC;gCAAE,WAAU;;oCAAsB,QAAQ,aAAa;oCAAC;;;;;;;0CACzD,8OAAC;gCAAE,WAAU;;oCAAU;oCAAQ,QAAQ,OAAO,CAAC,IAAI,CAAC;;;;;;;;;;;;;kCAEtD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAAoD;;;;;;0CACjE,8OAAC;gCAAE,WAAU;0CAAsB;;;;;;0CACnC,8OAAC;gCAAE,WAAU;0CAAU;;;;;;;;;;;;;;;;;;0BAI3B,8OAAC;gBAAI,WAAU;0BACZ,cAAc,GAAG,CAAC,CAAC,yBAClB,8OAAC;wBAEC,WAAU;;0CAEV,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;kDAAwC,SAAS,KAAK;;;;;;kDACnE,8OAAC,0IAAK;wCAAC,MAAM,SAAS,SAAS,GAAG,IAAI,YAAY;;4CAC/C,SAAS,SAAS;4CAAC;4CAAE,SAAS,UAAU;4CAAC;;;;;;;;;;;;;0CAG9C,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,mJAAW;wCACV,OAAO,SAAS,SAAS,GAAG,SAAS,UAAU,GAAG;wCAClD,KAAK,SAAS,UAAU;;;;;;kDAE1B,8OAAC;wCAAE,WAAU;;4CACV,SAAS,UAAU;4CAAC;4CAAkB,SAAS,SAAS;4CAAC;;;;;;;;;;;;;;uBAfzD,SAAS,EAAE;;;;;;;;;;;;;;;;AAuB5B"}},
    {"offset": {"line": 855, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/components/ui/input.tsx"],"sourcesContent":["import { ComponentProps, forwardRef } from \"react\";\nimport { twMerge } from \"tailwind-merge\";\n\ntype InputProps = ComponentProps<\"input\">;\n\nexport const Input = forwardRef<HTMLInputElement, InputProps>(function Input({ className, ...props }, ref) {\n  return (\n    <input\n      ref={ref}\n      className={twMerge(\n        \"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm outline-none transition focus:border-brand-500 focus:ring-2 focus:ring-brand-100\",\n        className\n      )}\n      {...props}\n    />\n  );\n});\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAIO,MAAM,sBAAQ,IAAA,mNAAU,EAA+B,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,GAAG;IACvG,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,sKAAO,EAChB,0JACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 880, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/lib/srs-api.ts"],"sourcesContent":["\"use client\";\n\nimport { apiFetch } from \"./api-client\";\nimport { Flashcard } from \"./types\";\n\nexport type GradeQuality = \"again\" | \"good\" | \"easy\";\n\nexport async function fetchDueFlashcards(token: string) {\n  return apiFetch<Flashcard[]>(\"/srs/due\", { token });\n}\n\nexport async function gradeFlashcard(cardId: string, quality: GradeQuality, token: string) {\n  return apiFetch<Flashcard>(`/srs/${cardId}/grade`, {\n    method: \"POST\",\n    token,\n    body: { quality }\n  });\n}\n\nexport async function fetchSrsStats(token: string) {\n  return apiFetch<{ reviewedToday: number; totalCards: number; dueCards: number }>(\"/srs/stats\", { token });\n}\n\nexport async function createCustomFlashcard(\n  token: string,\n  payload: { prompt: string; answer: string; level: \"beginner\" | \"n5\"; type: \"kana\" | \"vocab\" | \"kanji\" }\n) {\n  return apiFetch<Flashcard>(\"/srs/custom\", { method: \"POST\", token, body: payload });\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AAFA;;AAOO,eAAe,mBAAmB,KAAa;IACpD,OAAO,IAAA,uIAAQ,EAAc,YAAY;QAAE;IAAM;AACnD;AAEO,eAAe,eAAe,MAAc,EAAE,OAAqB,EAAE,KAAa;IACvF,OAAO,IAAA,uIAAQ,EAAY,CAAC,KAAK,EAAE,OAAO,MAAM,CAAC,EAAE;QACjD,QAAQ;QACR;QACA,MAAM;YAAE;QAAQ;IAClB;AACF;AAEO,eAAe,cAAc,KAAa;IAC/C,OAAO,IAAA,uIAAQ,EAAkE,cAAc;QAAE;IAAM;AACzG;AAEO,eAAe,sBACpB,KAAa,EACb,OAAuG;IAEvG,OAAO,IAAA,uIAAQ,EAAY,eAAe;QAAE,QAAQ;QAAQ;QAAO,MAAM;IAAQ;AACnF"}},
    {"offset": {"line": 923, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/components/srs/FlashcardReview.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { Badge } from \"../ui/badge\";\nimport { Button } from \"../ui/button\";\nimport { Card } from \"../ui/card\";\nimport { Input } from \"../ui/input\";\nimport { useAuth } from \"@/lib/auth-context\";\nimport { createCustomFlashcard, fetchDueFlashcards, fetchSrsStats, gradeFlashcard } from \"@/lib/srs-api\";\nimport { Flashcard, TrackKey } from \"@/lib/types\";\n\nexport function FlashcardReview() {\n  const { token } = useAuth();\n  const [cards, setCards] = useState<Flashcard[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [reveal, setReveal] = useState(false);\n  const [stats, setStats] = useState<{ reviewedToday: number; totalCards: number; dueCards: number } | null>(null);\n  const [creating, setCreating] = useState(false);\n  const [newCard, setNewCard] = useState<{ prompt: string; answer: string; level: TrackKey; type: Flashcard[\"type\"]}>({\n    prompt: \"\",\n    answer: \"\",\n    level: \"beginner\",\n    type: \"kana\"\n  });\n\n  useEffect(() => {\n    if (!token) return;\n    let cancelled = false;\n    const load = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const data = await fetchDueFlashcards(token);\n        const stat = await fetchSrsStats(token);\n        if (!cancelled) {\n          setCards(data);\n          setStats(stat);\n        }\n      } catch (err) {\n        if (!cancelled) setError(err instanceof Error ? err.message : \"Gagal memuat flashcard\");\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    };\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, [token]);\n\n  const dueCards = useMemo(\n    () =>\n      [...cards]\n        .sort((a, b) => a.due - b.due)\n        .filter((card) => card.due <= Date.now())\n        .slice(0, 1),\n    [cards]\n  );\n\n  const active = dueCards[0];\n\n  const handleGrade = async (quality: \"again\" | \"good\" | \"easy\") => {\n    if (!active || !token) return;\n    try {\n      await gradeFlashcard(active.id, quality, token);\n      setCards((prev) => prev.filter((c) => c.id !== active.id));\n      setReveal(false);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Gagal mengirim penilaian\");\n    }\n  };\n\n  return (\n    <Card className=\"space-y-4\">\n      <div className=\"flex flex-wrap items-center justify-between gap-3\">\n        <div>\n          <p className=\"section-title\">SRS & Flashcard</p>\n          <p className=\"muted\">Mulai dari kana lalu vocab/kanji N5.</p>\n        </div>\n        <Badge tone=\"info\">\n          {loading ? \"Memuat...\" : active ? \"Siap Review\" : \"Semua up to date\"}\n        </Badge>\n      </div>\n\n      {error ? (\n        <Card className=\"border border-amber-200 bg-amber-50 p-3\">\n          <p className=\"text-sm font-semibold text-amber-800\">Gagal memuat review</p>\n          <p className=\"text-xs text-amber-800/80\">{error}</p>\n        </Card>\n      ) : null}\n\n      {stats ? (\n        <div className=\"grid grid-cols-1 gap-2 rounded-lg bg-slate-50 p-3 text-xs text-slate-700 sm:grid-cols-3\">\n          <div>Total kartu: <span className=\"font-semibold\">{stats.totalCards}</span></div>\n          <div>Due: <span className=\"font-semibold\">{stats.dueCards}</span></div>\n          <div>Review hari ini: <span className=\"font-semibold\">{stats.reviewedToday}</span></div>\n        </div>\n      ) : null}\n\n      {active ? (\n        <div className=\"space-y-4\">\n          <div className=\"rounded-xl bg-slate-900 text-white p-5\">\n            <div className=\"flex items-center justify-between text-[11px] uppercase tracking-wide opacity-75\">\n              <span className=\"rounded-full bg-white/10 px-2 py-1\">\n                {active.type}\n              </span>\n              <span className=\"rounded-full bg-white/10 px-2 py-1\">\n                {active.level === \"beginner\" ? \"Kana\" : \"N5\"}\n              </span>\n            </div>\n            <p className=\"mt-4 text-3xl font-semibold\">{active.prompt}</p>\n            {reveal ? (\n              <p className=\"mt-3 rounded-lg bg-emerald-100/20 px-3 py-2 text-lg text-emerald-100\">\n                Jawaban: {active.answer}\n              </p>\n            ) : (\n              <Button\n                variant=\"ghost\"\n                className=\"mt-4 text-xs text-white hover:bg-white/10\"\n                onClick={() => setReveal(true)}\n              >\n                Tunjukkan jawaban\n              </Button>\n            )}\n          </div>\n\n          <div className=\"flex flex-wrap gap-2\">\n            <Button variant=\"outline\" className=\"px-4\" onClick={() => handleGrade(\"again\")}>\n              Again\n            </Button>\n            <Button variant=\"primary\" className=\"px-4\" onClick={() => handleGrade(\"good\")}>\n              Good\n            </Button>\n            <Button variant=\"ghost\" className=\"px-4\" onClick={() => handleGrade(\"easy\")}>\n              Easy\n            </Button>\n          </div>\n          <p className=\"text-xs text-slate-500\">\n            SRS ringan: interval meningkat dengan kualitas (again/good/easy).\n          </p>\n        </div>\n      ) : (\n        <div className=\"rounded-lg border border-dashed border-slate-200 p-5 text-sm text-slate-600\">\n          Semua kartu telah direview. Tambahkan vocab baru atau lanjut jalur N5.\n        </div>\n      )}\n\n      <div className=\"rounded-xl border border-slate-100 bg-white p-4 space-y-2\">\n        <p className=\"text-sm font-semibold text-slate-800\">Tambah kartu sendiri</p>\n        <div className=\"grid gap-2 sm:grid-cols-2\">\n          <div className=\"space-y-1\">\n            <p className=\"text-xs text-slate-600\">Prompt</p>\n            <Input value={newCard.prompt} onChange={(e) => setNewCard((p) => ({ ...p, prompt: e.target.value }))} />\n          </div>\n          <div className=\"space-y-1\">\n            <p className=\"text-xs text-slate-600\">Jawaban</p>\n            <Input value={newCard.answer} onChange={(e) => setNewCard((p) => ({ ...p, answer: e.target.value }))} />\n          </div>\n        </div>\n        <div className=\"grid gap-2 sm:grid-cols-2\">\n          <div className=\"space-y-1\">\n            <p className=\"text-xs text-slate-600\">Level</p>\n            <select\n              className=\"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm\"\n              value={newCard.level}\n              onChange={(e) => setNewCard((p) => ({ ...p, level: e.target.value as \"beginner\" | \"n5\" }))}\n            >\n              <option value=\"beginner\">Beginner</option>\n              <option value=\"n5\">N5</option>\n            </select>\n          </div>\n          <div className=\"space-y-1\">\n            <p className=\"text-xs text-slate-600\">Jenis</p>\n            <select\n              className=\"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm\"\n              value={newCard.type}\n              onChange={(e) => setNewCard((p) => ({ ...p, type: e.target.value as Flashcard[\"type\"] }))}\n            >\n              <option value=\"kana\">Kana</option>\n              <option value=\"vocab\">Vocab</option>\n              <option value=\"kanji\">Kanji</option>\n            </select>\n          </div>\n        </div>\n        <div className=\"flex flex-wrap gap-2\">\n          <Button\n            variant=\"primary\"\n            className=\"px-4\"\n            disabled={!newCard.prompt || !newCard.answer || creating || !token}\n            onClick={async () => {\n              if (!token) return;\n              setCreating(true);\n              setError(null);\n              try {\n                await createCustomFlashcard(token, newCard);\n                const data = await fetchDueFlashcards(token);\n                const stat = await fetchSrsStats(token);\n                setCards(data);\n                setStats(stat);\n                setNewCard({ prompt: \"\", answer: \"\", level: newCard.level, type: newCard.type });\n              } catch (err) {\n                setError(err instanceof Error ? err.message : \"Gagal menambah kartu\");\n              } finally {\n                setCreating(false);\n              }\n            }}\n          >\n            {creating ? \"Menyimpan...\" : \"Tambah kartu\"}\n          </Button>\n        </div>\n      </div>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1497, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/hooks/useTonePlayer.ts"],"sourcesContent":["import { useCallback, useRef } from \"react\";\n\nfunction buildOscillator(audioCtx: AudioContext, frequency: number, durationMs: number) {\n  const oscillator = audioCtx.createOscillator();\n  const gainNode = audioCtx.createGain();\n\n  oscillator.type = \"sine\";\n  oscillator.frequency.setValueAtTime(frequency, audioCtx.currentTime);\n  gainNode.gain.setValueAtTime(0.06, audioCtx.currentTime);\n  gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + durationMs / 1000);\n\n  oscillator.connect(gainNode);\n  gainNode.connect(audioCtx.destination);\n\n  return oscillator;\n}\n\nexport function useTonePlayer() {\n  const audioCtxRef = useRef<AudioContext | null>(null);\n\n  const playTone = useCallback((text: string) => {\n    if (typeof window === \"undefined\") return;\n\n    // Try speech synthesis for a closer \"reading\" experience\n    if (\"speechSynthesis\" in window) {\n      const utter = new SpeechSynthesisUtterance(text);\n      utter.lang = \"ja-JP\";\n      window.speechSynthesis.speak(utter);\n      return;\n    }\n\n    // Fallback to a pleasant sine beep sequence when speech is unavailable\n    const ctx = audioCtxRef.current ?? new AudioContext();\n    audioCtxRef.current = ctx;\n    const baseFreq = 440;\n\n    text\n      .split(\" \")\n      .filter(Boolean)\n      .slice(0, 4)\n      .forEach((token, idx) => {\n        const freq = baseFreq + idx * 60;\n        const osc = buildOscillator(ctx, freq, 320);\n        const startAt = ctx.currentTime + idx * 0.38;\n        osc.start(startAt);\n        osc.stop(startAt + 0.32);\n      });\n  }, []);\n\n  return { playTone };\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,SAAS,gBAAgB,QAAsB,EAAE,SAAiB,EAAE,UAAkB;IACpF,MAAM,aAAa,SAAS,gBAAgB;IAC5C,MAAM,WAAW,SAAS,UAAU;IAEpC,WAAW,IAAI,GAAG;IAClB,WAAW,SAAS,CAAC,cAAc,CAAC,WAAW,SAAS,WAAW;IACnE,SAAS,IAAI,CAAC,cAAc,CAAC,MAAM,SAAS,WAAW;IACvD,SAAS,IAAI,CAAC,4BAA4B,CAAC,OAAO,SAAS,WAAW,GAAG,aAAa;IAEtF,WAAW,OAAO,CAAC;IACnB,SAAS,OAAO,CAAC,SAAS,WAAW;IAErC,OAAO;AACT;AAEO,SAAS;IACd,MAAM,cAAc,IAAA,+MAAM,EAAsB;IAEhD,MAAM,WAAW,IAAA,oNAAW,EAAC,CAAC;QAC5B,wCAAmC;;;QAUnC,uEAAuE;QACvE,MAAM;QAEN,MAAM;IAaR,GAAG,EAAE;IAEL,OAAO;QAAE;IAAS;AACpB"}},
    {"offset": {"line": 1532, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/components/quiz/QuizCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { QuizItem } from \"@/lib/types\";\nimport { Button } from \"../ui/button\";\nimport { Badge } from \"../ui/badge\";\nimport { Card } from \"../ui/card\";\n\ninterface QuizCardProps {\n  item: QuizItem;\n}\n\nexport function QuizCard({ item }: QuizCardProps) {\n  const [selection, setSelection] = useState<string | null>(null);\n  const [isCorrect, setIsCorrect] = useState<boolean | null>(null);\n\n  const handleSelect = (choice: string) => {\n    setSelection(choice);\n    setIsCorrect(choice === item.answer);\n  };\n\n  return (\n    <Card className=\"space-y-3\">\n      <div className=\"flex items-start justify-between gap-2\">\n        <div>\n          <p className=\"text-sm font-semibold text-slate-900\">{item.prompt}</p>\n          {item.hint ? (\n            <p className=\"text-xs text-slate-500 mt-1\">Hint: {item.hint}</p>\n          ) : null}\n        </div>\n        <Badge tone=\"info\">Quiz</Badge>\n      </div>\n      <div className=\"grid gap-2\">\n        {item.choices.map((choice) => {\n          const isActive = selection === choice;\n          const isAnswer = choice === item.answer;\n          const tone =\n            isCorrect === null\n              ? \"outline\"\n              : isActive && isCorrect\n                ? \"primary\"\n                : isActive && !isCorrect\n                  ? \"warning\"\n                  : \"outline\";\n\n          return (\n            <Button\n              key={choice}\n              variant={tone === \"primary\" ? \"primary\" : \"outline\"}\n              className={`justify-start ${isActive ? \"\" : \"border-slate-200\"}`}\n              onClick={() => handleSelect(choice)}\n            >\n              {choice}\n              {isCorrect !== null && isAnswer ? \" ✓\" : \"\"}\n            </Button>\n          );\n        })}\n      </div>\n      {isCorrect !== null ? (\n        <p\n          className={`text-sm font-semibold ${\n            isCorrect ? \"text-green-700\" : \"text-amber-700\"\n          }`}\n        >\n          {isCorrect ? \"Benar!\" : `Kurang tepat, jawabannya ${item.answer}`}\n        </p>\n      ) : null}\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AANA;;;;;;AAYO,SAAS,SAAS,EAAE,IAAI,EAAiB;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAgB;IAC1D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAiB;IAE3D,MAAM,eAAe,CAAC;QACpB,aAAa;QACb,aAAa,WAAW,KAAK,MAAM;IACrC;IAEA,qBACE,8OAAC,wIAAI;QAAC,WAAU;;0BACd,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CACC,8OAAC;gCAAE,WAAU;0CAAwC,KAAK,MAAM;;;;;;4BAC/D,KAAK,IAAI,iBACR,8OAAC;gCAAE,WAAU;;oCAA8B;oCAAO,KAAK,IAAI;;;;;;uCACzD;;;;;;;kCAEN,8OAAC,0IAAK;wBAAC,MAAK;kCAAO;;;;;;;;;;;;0BAErB,8OAAC;gBAAI,WAAU;0BACZ,KAAK,OAAO,CAAC,GAAG,CAAC,CAAC;oBACjB,MAAM,WAAW,cAAc;oBAC/B,MAAM,WAAW,WAAW,KAAK,MAAM;oBACvC,MAAM,OACJ,cAAc,OACV,YACA,YAAY,YACV,YACA,YAAY,CAAC,YACX,YACA;oBAEV,qBACE,8OAAC,4IAAM;wBAEL,SAAS,SAAS,YAAY,YAAY;wBAC1C,WAAW,CAAC,cAAc,EAAE,WAAW,KAAK,oBAAoB;wBAChE,SAAS,IAAM,aAAa;;4BAE3B;4BACA,cAAc,QAAQ,WAAW,OAAO;;uBANpC;;;;;gBASX;;;;;;YAED,cAAc,qBACb,8OAAC;gBACC,WAAW,CAAC,sBAAsB,EAChC,YAAY,mBAAmB,kBAC/B;0BAED,YAAY,WAAW,CAAC,yBAAyB,EAAE,KAAK,MAAM,EAAE;;;;;uBAEjE;;;;;;;AAGV"}},
    {"offset": {"line": 1645, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/components/tracks/TrackBoard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useLearning } from \"@/lib/learning-context\";\nimport { Lesson, TrackKey } from \"@/lib/types\";\nimport { useTonePlayer } from \"@/hooks/useTonePlayer\";\nimport { Badge } from \"../ui/badge\";\nimport { Button } from \"../ui/button\";\nimport { Card } from \"../ui/card\";\nimport { QuizCard } from \"../quiz/QuizCard\";\nimport { useAuth } from \"@/lib/auth-context\";\nimport { fetchTracksThunk, persistUnitStatusThunk } from \"@/lib/store/learning-slice\";\nimport { useAppDispatch } from \"@/lib/store/hooks\";\n\nfunction LessonRow({\n  lesson,\n  onPlay\n}: {\n  lesson: Lesson;\n  onPlay: (audioHint: string) => void;\n}) {\n  return (\n    <div className=\"flex flex-col gap-1 rounded-lg border border-slate-100 px-3 py-2 bg-slate-50\">\n      <div className=\"flex items-center justify-between gap-2\">\n        <p className=\"text-sm font-semibold text-slate-900\">{lesson.title}</p>\n        <div className=\"flex gap-2\">\n          <Badge tone=\"info\">{lesson.estimatedMinutes}m</Badge>\n          <Badge tone={lesson.level === \"beginner\" ? \"warning\" : \"info\"}>\n            {lesson.level === \"beginner\" ? \"Kana\" : \"N5\"}\n          </Badge>\n        </div>\n      </div>\n      <p className=\"text-xs text-slate-600\">{lesson.summary}</p>\n      <div className=\"flex flex-wrap gap-2 text-xs text-slate-500\">\n        {lesson.skillTags.map((tag) => (\n          <span key={tag} className=\"rounded-full bg-white border px-2 py-1\">\n            {tag}\n          </span>\n        ))}\n        {lesson.audioHint ? (\n          <Button\n            type=\"button\"\n            variant=\"ghost\"\n            className=\"text-xs px-2 py-1\"\n            onClick={() => onPlay(lesson.audioHint!)}\n          >\n            ▶ Audio\n          </Button>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n\nfunction Slider({ lessons, onPlay }: { lessons: Lesson[]; onPlay: (hint: string) => void }) {\n  const [index, setIndex] = useState(0);\n  const total = lessons.length;\n  const clamped = Math.max(0, Math.min(index, Math.max(0, total - 1)));\n\n  useEffect(() => {\n    if (clamped !== index) setIndex(clamped);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [total]);\n\n  if (!total) return null;\n\n  const current = lessons[clamped];\n\n  return (\n    <div className=\"space-y-3\">\n      <div className=\"rounded-xl border border-slate-200 bg-white\">\n        <LessonRow lesson={current} onPlay={onPlay} />\n      </div>\n      <div className=\"flex items-center justify-between text-xs text-slate-600\">\n        <Button\n          variant=\"outline\"\n          className=\"text-xs\"\n          disabled={clamped === 0}\n          onClick={() => setIndex((prev) => Math.max(0, prev - 1))}\n        >\n          ← Sebelumnya\n        </Button>\n        <span>\n          {clamped + 1}/{total}\n        </span>\n        <Button\n          variant=\"outline\"\n          className=\"text-xs\"\n          disabled={clamped >= total - 1}\n          onClick={() => setIndex((prev) => Math.min(total - 1, prev + 1))}\n        >\n          Berikutnya →\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport function TrackBoard({ activeTrack }: { activeTrack: TrackKey }) {\n  const { tracks, markUnit, tracksStatus, tracksError } = useLearning();\n  const dispatch = useAppDispatch();\n  const { playTone } = useTonePlayer();\n  const { token } = useAuth();\n\n  useEffect(() => {\n    if (!token) return;\n    dispatch(fetchTracksThunk(token));\n  }, [dispatch, token]);\n\n  const sourceTracks = tracks;\n\n  const orderedTracks = useMemo(() => {\n    const clone = [...sourceTracks];\n    return clone.sort((a, b) =>\n      a.id === \"beginner\" ? -1 : b.id === \"beginner\" ? 1 : 0\n    );\n  }, [sourceTracks]);\n\n  const handleMark = async (trackId: TrackKey, unitId: string) => {\n    markUnit(trackId, unitId, \"completed\");\n    if (token) {\n      void dispatch(persistUnitStatusThunk({ trackId, unitId, status: \"completed\", token }));\n    }\n  };\n\n  const visibleTracks = orderedTracks.filter((track) => track.id === activeTrack);\n\n  if (!visibleTracks.length) {\n    return (\n      <Card className=\"w-full bg-slate-50 text-slate-700\">\n        Track belum tersedia. Pilih Beginner atau N5 untuk melihat konten yang aktif.\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {tracksStatus === \"loading\" ? (\n        <Card className=\"border border-slate-200 bg-slate-50 p-4\">\n          <p className=\"text-sm font-semibold text-slate-800\">Memuat track dari server…</p>\n        </Card>\n      ) : null}\n      {tracksError ? (\n        <Card className=\"border border-amber-200 bg-amber-50 p-4\">\n          <p className=\"text-sm font-semibold text-amber-800\">Gagal memuat track</p>\n          <p className=\"text-xs text-amber-800/80\">{tracksError}</p>\n        </Card>\n      ) : null}\n      {visibleTracks.map((track) => {\n        const highlightLesson = track.units.find((u) => (u.lessons || []).length > 0)?.lessons?.[0];\n        const isBeginner = track.id === \"beginner\";\n        const bg =\n          isBeginner\n            ? \"bg-gradient-to-r from-amber-100 via-white to-amber-50 border-amber-100\"\n            : \"bg-gradient-to-r from-sky-100 via-white to-sky-50 border-sky-100\";\n        return (\n          <Card key={track.id} className={`space-y-4 w-full ${bg}`}>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"section-title\">{track.title}</p>\n                <p className=\"muted\">{track.description}</p>\n              </div>\n              <Badge tone={isBeginner ? \"warning\" : \"info\"}>\n                {isBeginner ? \"Beginner\" : \"N5\"}\n              </Badge>\n            </div>\n\n            <div className=\"space-y-3\">\n              {track.units.map((unit) => (\n                <div\n                  key={unit.id}\n                  className={`rounded-xl p-3 border ${\n                    isBeginner\n                      ? \"border-amber-200 bg-white/70\"\n                      : \"border-sky-200 bg-white/70\"\n                  }`}\n                >\n                  <div className=\"flex items-center justify-between gap-2\">\n                    <div>\n                      <p className=\"text-sm font-semibold text-slate-900\">\n                        {unit.title}\n                      </p>\n                      <p className=\"text-xs text-slate-500\">\n                        {unit.lessons.length} pelajaran · status:{\" \"}\n                        {unit.status.replace(\"_\", \" \")}\n                      </p>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Badge tone={unit.status === \"completed\" ? \"success\" : \"info\"}>\n                        {unit.status === \"completed\" ? \"Selesai\" : \"Belajar\"}\n                      </Badge>\n                      <Button\n                        variant=\"ghost\"\n                        className=\"text-xs\"\n                        onClick={() => handleMark(track.id, unit.id)}\n                      >\n                        Tandai selesai\n                      </Button>\n                    </div>\n                  </div>\n                  <div className=\"mt-2 space-y-2\">\n                    {unit.title.toLowerCase().includes(\"hiragana\") ? (\n                      <Slider lessons={unit.lessons || []} onPlay={playTone} />\n                    ) : (\n                      (unit.lessons || []).slice(0, 2).map((lesson) => (\n                        <LessonRow\n                          key={lesson.id}\n                          lesson={lesson}\n                          onPlay={(hint) => playTone(hint)}\n                        />\n                      ))\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {highlightLesson && highlightLesson.quiz && highlightLesson.quiz.length > 0 ? (\n              <div className=\"space-y-2\">\n                <p className=\"text-sm font-semibold text-slate-800\">Contoh kuis</p>\n                <QuizCard item={highlightLesson.quiz[0]} />\n              </div>\n            ) : null}\n          </Card>\n        );\n      })}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;;;;;;;;;;;;AAcA,SAAS,UAAU,EACjB,MAAM,EACN,MAAM,EAIP;IACC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAAwC,OAAO,KAAK;;;;;;kCACjE,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,0IAAK;gCAAC,MAAK;;oCAAQ,OAAO,gBAAgB;oCAAC;;;;;;;0CAC5C,8OAAC,0IAAK;gCAAC,MAAM,OAAO,KAAK,KAAK,aAAa,YAAY;0CACpD,OAAO,KAAK,KAAK,aAAa,SAAS;;;;;;;;;;;;;;;;;;0BAI9C,8OAAC;gBAAE,WAAU;0BAA0B,OAAO,OAAO;;;;;;0BACrD,8OAAC;gBAAI,WAAU;;oBACZ,OAAO,SAAS,CAAC,GAAG,CAAC,CAAC,oBACrB,8OAAC;4BAAe,WAAU;sCACvB;2BADQ;;;;;oBAIZ,OAAO,SAAS,iBACf,8OAAC,4IAAM;wBACL,MAAK;wBACL,SAAQ;wBACR,WAAU;wBACV,SAAS,IAAM,OAAO,OAAO,SAAS;kCACvC;;;;;+BAGC;;;;;;;;;;;;;AAIZ;AAEA,SAAS,OAAO,EAAE,OAAO,EAAE,MAAM,EAAyD;IACxF,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,QAAQ,QAAQ,MAAM;IAC5B,MAAM,UAAU,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,OAAO,KAAK,GAAG,CAAC,GAAG,QAAQ;IAEhE,IAAA,kNAAS,EAAC;QACR,IAAI,YAAY,OAAO,SAAS;IAChC,uDAAuD;IACzD,GAAG;QAAC;KAAM;IAEV,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,UAAU,OAAO,CAAC,QAAQ;IAEhC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAU,QAAQ;oBAAS,QAAQ;;;;;;;;;;;0BAEtC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,4IAAM;wBACL,SAAQ;wBACR,WAAU;wBACV,UAAU,YAAY;wBACtB,SAAS,IAAM,SAAS,CAAC,OAAS,KAAK,GAAG,CAAC,GAAG,OAAO;kCACtD;;;;;;kCAGD,8OAAC;;4BACE,UAAU;4BAAE;4BAAE;;;;;;;kCAEjB,8OAAC,4IAAM;wBACL,SAAQ;wBACR,WAAU;wBACV,UAAU,WAAW,QAAQ;wBAC7B,SAAS,IAAM,SAAS,CAAC,OAAS,KAAK,GAAG,CAAC,QAAQ,GAAG,OAAO;kCAC9D;;;;;;;;;;;;;;;;;;AAMT;AAEO,SAAS,WAAW,EAAE,WAAW,EAA6B;IACnE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EAAE,GAAG,IAAA,iJAAW;IACnE,MAAM,WAAW,IAAA,8IAAc;IAC/B,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,8IAAa;IAClC,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,yIAAO;IAEzB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,OAAO;QACZ,SAAS,IAAA,4JAAgB,EAAC;IAC5B,GAAG;QAAC;QAAU;KAAM;IAEpB,MAAM,eAAe;IAErB,MAAM,gBAAgB,IAAA,gNAAO,EAAC;QAC5B,MAAM,QAAQ;eAAI;SAAa;QAC/B,OAAO,MAAM,IAAI,CAAC,CAAC,GAAG,IACpB,EAAE,EAAE,KAAK,aAAa,CAAC,IAAI,EAAE,EAAE,KAAK,aAAa,IAAI;IAEzD,GAAG;QAAC;KAAa;IAEjB,MAAM,aAAa,OAAO,SAAmB;QAC3C,SAAS,SAAS,QAAQ;QAC1B,IAAI,OAAO;YACT,KAAK,SAAS,IAAA,kKAAsB,EAAC;gBAAE;gBAAS;gBAAQ,QAAQ;gBAAa;YAAM;QACrF;IACF;IAEA,MAAM,gBAAgB,cAAc,MAAM,CAAC,CAAC,QAAU,MAAM,EAAE,KAAK;IAEnE,IAAI,CAAC,cAAc,MAAM,EAAE;QACzB,qBACE,8OAAC,wIAAI;YAAC,WAAU;sBAAoC;;;;;;IAIxD;IAEA,qBACE,8OAAC;QAAI,WAAU;;YACZ,iBAAiB,0BAChB,8OAAC,wIAAI;gBAAC,WAAU;0BACd,cAAA,8OAAC;oBAAE,WAAU;8BAAuC;;;;;;;;;;uBAEpD;YACH,4BACC,8OAAC,wIAAI;gBAAC,WAAU;;kCACd,8OAAC;wBAAE,WAAU;kCAAuC;;;;;;kCACpD,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;uBAE1C;YACH,cAAc,GAAG,CAAC,CAAC;gBAClB,MAAM,kBAAkB,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,IAAM,CAAC,EAAE,OAAO,IAAI,EAAE,EAAE,MAAM,GAAG,IAAI,SAAS,CAAC,EAAE;gBAC3F,MAAM,aAAa,MAAM,EAAE,KAAK;gBAChC,MAAM,KACJ,aACI,2EACA;gBACN,qBACE,8OAAC,wIAAI;oBAAgB,WAAW,CAAC,iBAAiB,EAAE,IAAI;;sCACtD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAE,WAAU;sDAAiB,MAAM,KAAK;;;;;;sDACzC,8OAAC;4CAAE,WAAU;sDAAS,MAAM,WAAW;;;;;;;;;;;;8CAEzC,8OAAC,0IAAK;oCAAC,MAAM,aAAa,YAAY;8CACnC,aAAa,aAAa;;;;;;;;;;;;sCAI/B,8OAAC;4BAAI,WAAU;sCACZ,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,qBAChB,8OAAC;oCAEC,WAAW,CAAC,sBAAsB,EAChC,aACI,iCACA,8BACJ;;sDAEF,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;;sEACC,8OAAC;4DAAE,WAAU;sEACV,KAAK,KAAK;;;;;;sEAEb,8OAAC;4DAAE,WAAU;;gEACV,KAAK,OAAO,CAAC,MAAM;gEAAC;gEAAqB;gEACzC,KAAK,MAAM,CAAC,OAAO,CAAC,KAAK;;;;;;;;;;;;;8DAG9B,8OAAC;oDAAI,WAAU;;sEACb,8OAAC,0IAAK;4DAAC,MAAM,KAAK,MAAM,KAAK,cAAc,YAAY;sEACpD,KAAK,MAAM,KAAK,cAAc,YAAY;;;;;;sEAE7C,8OAAC,4IAAM;4DACL,SAAQ;4DACR,WAAU;4DACV,SAAS,IAAM,WAAW,MAAM,EAAE,EAAE,KAAK,EAAE;sEAC5C;;;;;;;;;;;;;;;;;;sDAKL,8OAAC;4CAAI,WAAU;sDACZ,KAAK,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,4BACjC,8OAAC;gDAAO,SAAS,KAAK,OAAO,IAAI,EAAE;gDAAE,QAAQ;;;;;uDAE7C,CAAC,KAAK,OAAO,IAAI,EAAE,EAAE,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,uBACpC,8OAAC;oDAEC,QAAQ;oDACR,QAAQ,CAAC,OAAS,SAAS;mDAFtB,OAAO,EAAE;;;;;;;;;;;mCApCjB,KAAK,EAAE;;;;;;;;;;wBA+CjB,mBAAmB,gBAAgB,IAAI,IAAI,gBAAgB,IAAI,CAAC,MAAM,GAAG,kBACxE,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAU;8CAAuC;;;;;;8CACpD,8OAAC,kJAAQ;oCAAC,MAAM,gBAAgB,IAAI,CAAC,EAAE;;;;;;;;;;;mCAEvC;;mBAlEK,MAAM,EAAE;;;;;YAqEvB;;;;;;;AAGN"}},
    {"offset": {"line": 2125, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/assets/peoplehome.png.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 2816, height: 1536, blurWidth: 8, blurHeight: 4, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAb0lEQVR42gFkAJv/APzU2vra2vXe1Ne9qdbFruTx29j24ND44gD71OD62OHqz9PGnZHNtKXT5djP8uXN9+sA+NDq99Ps3MvgqayusLyutc6+x+fly/PyAPHP8+7R9MO+35y5xKLJvK/Tzcrq88nv9rr9T7Vr/hkXAAAAAElFTkSuQmCC\"};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,gJAAG;IAAE,OAAO;IAAM,QAAQ;IAAM,WAAW;IAAG,YAAY;IAAG,aAAa;AAAwP"}},
    {"offset": {"line": 2143, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/components/auth/AuthCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useAuth } from \"@/lib/auth-context\";\n\ntype Mode = \"login\" | \"signup\";\n\nexport function AuthCard() {\n  const { login, signup, loading, error } = useAuth();\n  const [mode, setMode] = useState<Mode>(\"login\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [status, setStatus] = useState<string | null>(null);\n\n  const title = useMemo(() => (mode === \"login\" ? \"Masuk untuk lanjut belajar\" : \"Daftar & simpan progres\"), [mode]);\n  const subtitle = useMemo(\n    () =>\n      mode === \"login\"\n        ? \"Lanjutkan XP, streak, dan latihanmu di semua perangkat.\"\n        : \"Buat akun gratis untuk menyimpan progres, XP, dan streak.\",\n    [mode]\n  );\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setStatus(null);\n    try {\n      if (mode === \"login\") {\n        await login({ email, password });\n        setStatus(\"Berhasil masuk. Selamat datang kembali!\");\n      } else {\n        await signup({ name, email, password });\n        setStatus(\"Akun berhasil dibuat. Yuk mulai latihan!\");\n      }\n    } catch {\n      setStatus(null);\n      // error handled via context\n    }\n  };\n\n  return (\n    <Card className=\"relative overflow-hidden border border-slate-100 bg-white p-5 shadow-card\">\n      <div className=\"flex flex-wrap items-center justify-between gap-3\">\n        <div className=\"space-y-1\">\n          <p className=\"text-sm font-semibold text-slate-900\">{title}</p>\n          <p className=\"text-xs text-slate-500\">{subtitle}</p>\n        </div>\n        <div className=\"flex rounded-full bg-slate-100 p-1 text-xs font-semibold text-slate-700\">\n          <button\n            className={`rounded-full px-3 py-1 transition ${\n              mode === \"login\" ? \"bg-white text-slate-900 shadow\" : \"\"\n            }`}\n            onClick={() => !loading && setMode(\"login\")}\n            disabled={loading}\n          >\n            Masuk\n          </button>\n          <button\n            className={`rounded-full px-3 py-1 transition ${\n              mode === \"signup\" ? \"bg-white text-slate-900 shadow\" : \"\"\n            }`}\n            onClick={() => !loading && setMode(\"signup\")}\n            disabled={loading}\n          >\n            Daftar\n          </button>\n        </div>\n      </div>\n\n      <form className=\"mt-4 space-y-3\" onSubmit={handleSubmit}>\n        {mode === \"signup\" ? (\n          <div className=\"space-y-1\">\n            <label className=\"text-xs font-semibold text-slate-600\">Nama</label>\n            <Input\n              placeholder=\"Nama tampilan\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              required\n              disabled={loading}\n            />\n          </div>\n        ) : null}\n        <div className=\"space-y-1\">\n          <label className=\"text-xs font-semibold text-slate-600\">Email</label>\n          <Input\n            type=\"email\"\n            placeholder=\"emailmu@contoh.com\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            required\n            disabled={loading}\n          />\n        </div>\n        <div className=\"space-y-1\">\n          <label className=\"text-xs font-semibold text-slate-600\">Password</label>\n          <Input\n            type=\"password\"\n            placeholder=\"Minimal 6 karakter\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            minLength={6}\n            required\n            disabled={loading}\n          />\n        </div>\n        {error ? <p className=\"text-xs font-semibold text-amber-700\">Error: {error}</p> : null}\n        {status ? <p className=\"text-xs font-semibold text-green-700\">{status}</p> : null}\n        <Button type=\"submit\" variant=\"primary\" className=\"w-full\" disabled={loading}>\n          {loading ? \"Memproses...\" : mode === \"login\" ? \"Masuk\" : \"Daftar\"}\n        </Button>\n      </form>\n      <p className=\"mt-2 text-[11px] text-slate-500\">\n        Dengan membuat akun, progres XP, streak, dan latihanmu akan tersimpan.\n      </p>\n      {loading ? (\n        <div className=\"absolute inset-0 z-10 flex flex-col items-center justify-center bg-white/80 backdrop-blur-[1px]\">\n          <div className=\"mb-3 flex h-14 w-14 items-center justify-center rounded-full border border-brand-100 bg-brand-50\">\n            <svg\n              className=\"h-7 w-7 animate-spin text-brand-600\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              aria-hidden=\"true\"\n            >\n              <path d=\"M12 2v4\" />\n              <path d=\"M12 18v4\" />\n              <path d=\"m4.93 4.93 2.83 2.83\" />\n              <path d=\"m16.24 16.24 2.83 2.83\" />\n              <path d=\"M2 12h4\" />\n              <path d=\"M18 12h4\" />\n              <path d=\"m4.93 19.07 2.83-2.83\" />\n              <path d=\"m16.24 7.76 2.83-2.83\" />\n            </svg>\n          </div>\n          <p className=\"text-sm font-semibold text-slate-700\">Memproses...</p>\n        </div>\n      ) : null}\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAUO,SAAS;IACd,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,IAAA,yIAAO;IACjD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAO;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAgB;IAEpD,MAAM,QAAQ,IAAA,gNAAO,EAAC,IAAO,SAAS,UAAU,+BAA+B,2BAA4B;QAAC;KAAK;IACjH,MAAM,WAAW,IAAA,gNAAO,EACtB,IACE,SAAS,UACL,4DACA,6DACN;QAAC;KAAK;IAGR,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,UAAU;QACV,IAAI;YACF,IAAI,SAAS,SAAS;gBACpB,MAAM,MAAM;oBAAE;oBAAO;gBAAS;gBAC9B,UAAU;YACZ,OAAO;gBACL,MAAM,OAAO;oBAAE;oBAAM;oBAAO;gBAAS;gBACrC,UAAU;YACZ;QACF,EAAE,OAAM;YACN,UAAU;QACV,4BAA4B;QAC9B;IACF;IAEA,qBACE,8OAAC,wIAAI;QAAC,WAAU;;0BACd,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAAwC;;;;;;0CACrD,8OAAC;gCAAE,WAAU;0CAA0B;;;;;;;;;;;;kCAEzC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,WAAW,CAAC,kCAAkC,EAC5C,SAAS,UAAU,mCAAmC,IACtD;gCACF,SAAS,IAAM,CAAC,WAAW,QAAQ;gCACnC,UAAU;0CACX;;;;;;0CAGD,8OAAC;gCACC,WAAW,CAAC,kCAAkC,EAC5C,SAAS,WAAW,mCAAmC,IACvD;gCACF,SAAS,IAAM,CAAC,WAAW,QAAQ;gCACnC,UAAU;0CACX;;;;;;;;;;;;;;;;;;0BAML,8OAAC;gBAAK,WAAU;gBAAiB,UAAU;;oBACxC,SAAS,yBACR,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAM,WAAU;0CAAuC;;;;;;0CACxD,8OAAC,0IAAK;gCACJ,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;gCACvC,QAAQ;gCACR,UAAU;;;;;;;;;;;+BAGZ;kCACJ,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAM,WAAU;0CAAuC;;;;;;0CACxD,8OAAC,0IAAK;gCACJ,MAAK;gCACL,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gCACxC,QAAQ;gCACR,UAAU;;;;;;;;;;;;kCAGd,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAM,WAAU;0CAAuC;;;;;;0CACxD,8OAAC,0IAAK;gCACJ,MAAK;gCACL,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gCAC3C,WAAW;gCACX,QAAQ;gCACR,UAAU;;;;;;;;;;;;oBAGb,sBAAQ,8OAAC;wBAAE,WAAU;;4BAAuC;4BAAQ;;;;;;+BAAa;oBACjF,uBAAS,8OAAC;wBAAE,WAAU;kCAAwC;;;;;+BAAc;kCAC7E,8OAAC,4IAAM;wBAAC,MAAK;wBAAS,SAAQ;wBAAU,WAAU;wBAAS,UAAU;kCAClE,UAAU,iBAAiB,SAAS,UAAU,UAAU;;;;;;;;;;;;0BAG7D,8OAAC;gBAAE,WAAU;0BAAkC;;;;;;YAG9C,wBACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,WAAU;4BACV,SAAQ;4BACR,MAAK;4BACL,QAAO;4BACP,aAAY;4BACZ,eAAc;4BACd,gBAAe;4BACf,eAAY;;8CAEZ,8OAAC;oCAAK,GAAE;;;;;;8CACR,8OAAC;oCAAK,GAAE;;;;;;8CACR,8OAAC;oCAAK,GAAE;;;;;;8CACR,8OAAC;oCAAK,GAAE;;;;;;8CACR,8OAAC;oCAAK,GAAE;;;;;;8CACR,8OAAC;oCAAK,GAAE;;;;;;8CACR,8OAAC;oCAAK,GAAE;;;;;;8CACR,8OAAC;oCAAK,GAAE;;;;;;;;;;;;;;;;;kCAGZ,8OAAC;wBAAE,WAAU;kCAAuC;;;;;;;;;;;uBAEpD;;;;;;;AAGV"}},
    {"offset": {"line": 2504, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/components/illustrations/Torii.tsx"],"sourcesContent":["\"use client\";\n\nexport function ToriiIllustration() {\n  return (\n    <svg\n      viewBox=\"0 0 220 150\"\n      className=\"h-32 w-full max-w-sm drop-shadow-sm\"\n      aria-hidden=\"true\"\n    >\n      <defs>\n        <linearGradient id=\"beam\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" stopColor=\"#ef4444\" />\n          <stop offset=\"100%\" stopColor=\"#b91c1c\" />\n        </linearGradient>\n        <linearGradient id=\"leg\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n          <stop offset=\"0%\" stopColor=\"#dc2626\" />\n          <stop offset=\"100%\" stopColor=\"#7f1d1d\" />\n        </linearGradient>\n        <linearGradient id=\"roof\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n          <stop offset=\"0%\" stopColor=\"#0f172a\" />\n          <stop offset=\"100%\" stopColor=\"#1f2937\" />\n        </linearGradient>\n      </defs>\n      <rect x=\"24\" y=\"112\" width=\"172\" height=\"16\" fill=\"#0f172a\" opacity=\"0.18\" rx=\"8\" />\n      <g>\n        <path\n          d=\"M30 46h160c4 0 6 4 3 6l-12 8H39l-12-8c-3-2-1-6 3-6Z\"\n          fill=\"url(#roof)\"\n        />\n        <rect x=\"35\" y=\"38\" width=\"150\" height=\"10\" rx=\"4\" fill=\"url(#beam)\" />\n        <rect x=\"48\" y=\"58\" width=\"22\" height=\"64\" rx=\"6\" fill=\"url(#leg)\" />\n        <rect x=\"150\" y=\"58\" width=\"22\" height=\"64\" rx=\"6\" fill=\"url(#leg)\" />\n        <rect x=\"95\" y=\"62\" width=\"30\" height=\"60\" rx=\"5\" fill=\"#0f172a\" opacity=\"0.12\" />\n        <rect x=\"68\" y=\"52\" width=\"12\" height=\"6\" rx=\"2\" fill=\"#fcd34d\" />\n        <rect x=\"140\" y=\"52\" width=\"12\" height=\"6\" rx=\"2\" fill=\"#fcd34d\" />\n      </g>\n      <g>\n        <circle cx=\"52\" cy=\"28\" r=\"5\" fill=\"#f8fafc\" opacity=\"0.8\">\n          <animateTransform\n            attributeName=\"transform\"\n            type=\"translate\"\n            values=\"0; 4; 0\"\n            dur=\"4s\"\n            repeatCount=\"indefinite\"\n          />\n        </circle>\n        <circle cx=\"168\" cy=\"26\" r=\"5\" fill=\"#f8fafc\" opacity=\"0.8\">\n          <animateTransform\n            attributeName=\"transform\"\n            type=\"translate\"\n            values=\"0; -3; 0\"\n            dur=\"3.5s\"\n            repeatCount=\"indefinite\"\n          />\n        </circle>\n      </g>\n      <path\n        d=\"M60 130c18-6 32-9 50-9s32 3 50 9\"\n        fill=\"none\"\n        stroke=\"#d1d5db\"\n        strokeWidth=\"4\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAEO,SAAS;IACd,qBACE,8OAAC;QACC,SAAQ;QACR,WAAU;QACV,eAAY;;0BAEZ,8OAAC;;kCACC,8OAAC;wBAAe,IAAG;wBAAO,IAAG;wBAAK,IAAG;wBAAK,IAAG;wBAAO,IAAG;;0CACrD,8OAAC;gCAAK,QAAO;gCAAK,WAAU;;;;;;0CAC5B,8OAAC;gCAAK,QAAO;gCAAO,WAAU;;;;;;;;;;;;kCAEhC,8OAAC;wBAAe,IAAG;wBAAM,IAAG;wBAAK,IAAG;wBAAK,IAAG;wBAAK,IAAG;;0CAClD,8OAAC;gCAAK,QAAO;gCAAK,WAAU;;;;;;0CAC5B,8OAAC;gCAAK,QAAO;gCAAO,WAAU;;;;;;;;;;;;kCAEhC,8OAAC;wBAAe,IAAG;wBAAO,IAAG;wBAAK,IAAG;wBAAK,IAAG;wBAAK,IAAG;;0CACnD,8OAAC;gCAAK,QAAO;gCAAK,WAAU;;;;;;0CAC5B,8OAAC;gCAAK,QAAO;gCAAO,WAAU;;;;;;;;;;;;;;;;;;0BAGlC,8OAAC;gBAAK,GAAE;gBAAK,GAAE;gBAAM,OAAM;gBAAM,QAAO;gBAAK,MAAK;gBAAU,SAAQ;gBAAO,IAAG;;;;;;0BAC9E,8OAAC;;kCACC,8OAAC;wBACC,GAAE;wBACF,MAAK;;;;;;kCAEP,8OAAC;wBAAK,GAAE;wBAAK,GAAE;wBAAK,OAAM;wBAAM,QAAO;wBAAK,IAAG;wBAAI,MAAK;;;;;;kCACxD,8OAAC;wBAAK,GAAE;wBAAK,GAAE;wBAAK,OAAM;wBAAK,QAAO;wBAAK,IAAG;wBAAI,MAAK;;;;;;kCACvD,8OAAC;wBAAK,GAAE;wBAAM,GAAE;wBAAK,OAAM;wBAAK,QAAO;wBAAK,IAAG;wBAAI,MAAK;;;;;;kCACxD,8OAAC;wBAAK,GAAE;wBAAK,GAAE;wBAAK,OAAM;wBAAK,QAAO;wBAAK,IAAG;wBAAI,MAAK;wBAAU,SAAQ;;;;;;kCACzE,8OAAC;wBAAK,GAAE;wBAAK,GAAE;wBAAK,OAAM;wBAAK,QAAO;wBAAI,IAAG;wBAAI,MAAK;;;;;;kCACtD,8OAAC;wBAAK,GAAE;wBAAM,GAAE;wBAAK,OAAM;wBAAK,QAAO;wBAAI,IAAG;wBAAI,MAAK;;;;;;;;;;;;0BAEzD,8OAAC;;kCACC,8OAAC;wBAAO,IAAG;wBAAK,IAAG;wBAAK,GAAE;wBAAI,MAAK;wBAAU,SAAQ;kCACnD,cAAA,8OAAC;4BACC,eAAc;4BACd,MAAK;4BACL,QAAO;4BACP,KAAI;4BACJ,aAAY;;;;;;;;;;;kCAGhB,8OAAC;wBAAO,IAAG;wBAAM,IAAG;wBAAK,GAAE;wBAAI,MAAK;wBAAU,SAAQ;kCACpD,cAAA,8OAAC;4BACC,eAAc;4BACd,MAAK;4BACL,QAAO;4BACP,KAAI;4BACJ,aAAY;;;;;;;;;;;;;;;;;0BAIlB,8OAAC;gBACC,GAAE;gBACF,MAAK;gBACL,QAAO;gBACP,aAAY;gBACZ,eAAc;;;;;;;;;;;;AAItB"}},
    {"offset": {"line": 2788, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomasdarmawan/Documents/github/tomodachi/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { OnboardingPanel } from \"@/components/onboarding/OnboardingPanel\";\nimport { ProfileSummary } from \"@/components/profile/ProfileSummary\";\nimport { FlashcardReview } from \"@/components/srs/FlashcardReview\";\nimport { TrackBoard } from \"@/components/tracks/TrackBoard\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport Link from \"next/link\";\nimport { useLearning } from \"@/lib/learning-context\";\nimport Image from \"next/image\";\nimport heroPerson from \"@/assets/peoplehome.png\";\nimport { AuthCard } from \"@/components/auth/AuthCard\";\nimport { useAuth } from \"@/lib/auth-context\";\nimport { ToriiIllustration } from \"@/components/illustrations/Torii\";\nimport { loadDashboardData } from \"@/lib/store/dashboard-slice\";\nimport { useAppDispatch, useAppSelector } from \"@/lib/store/hooks\";\n\nexport default function HomePage() {\n  const { onboardingComplete, profile, setOnboardingComplete } = useLearning();\n  const { user, logout, token } = useAuth();\n  const dispatch = useAppDispatch();\n  const { history, nextUnit, loading: dashboardLoading, error: dashboardError } = useAppSelector((state) => state.dashboard);\n  const [levelTab, setLevelTab] = useState<\n    \"beginner\" | \"n5\" | \"n4\" | \"n3\" | \"n2\" | \"n1\"\n  >(\"beginner\");\n  const isN5Track = profile.track === \"n5\";\n  const isAuthenticated = Boolean(user);\n\n  const tabs = useMemo(\n    () => [\n      { id: \"beginner\", label: \"Beginner (Kana)\", disabled: false },\n      { id: \"n5\", label: \"N5 Dasar\", disabled: false },\n      { id: \"n4\", label: \"N4\", disabled: true },\n      { id: \"n3\", label: \"N3\", disabled: true },\n      { id: \"n2\", label: \"N2\", disabled: true },\n      { id: \"n1\", label: \"N1\", disabled: true }\n    ] as const,\n    []\n  );\n\n  useEffect(() => {\n    if (!token) return;\n    dispatch(loadDashboardData({ token, track: profile.track }));\n  }, [dispatch, token, profile.track]);\n\n  return (\n    <main className=\"mx-auto flex max-w-6xl flex-col gap-6 px-4 py-6 md:py-10\">\n      <header className=\"rounded-2xl bg-gradient-to-r from-brand-600 via-brand-500 to-brand-400 px-5 py-6 text-white shadow-card sm:px-6 sm:py-7\">\n        <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n          <div className=\"space-y-2\">\n            <p className=\"text-sm uppercase tracking-wide text-white/80\">Tomodachi · Japanese Learning</p>\n            <h1 className=\"text-2xl font-bold sm:text-3xl\">Halo, mari lanjutkan belajarmu</h1>\n            <p className=\"text-sm leading-relaxed text-white/85\">\n              Beginner: fokus hiragana/katakana + audio + kuis.<br></br>\n              N5: vocab, grammar, kanji dengan latihan campuran dan SRS flashcard.\n            </p>\n          </div>\n          <div className=\"hidden items-center justify-center md:flex\">\n            <div className=\"h-44 w-44 overflow-hidden rounded-full bg-white/10 p-1.5 shadow-lg shadow-brand-900/20\">\n              <div className=\"relative h-full w-full overflow-hidden rounded-full bg-white/20\">\n                <Image\n                  src={heroPerson}\n                  alt=\"Belajar bersama Tomodachi\"\n                  className=\"h-full w-full object-cover\"\n                  sizes=\"176px\"\n                  priority\n                />\n              </div>\n            </div>\n          </div>\n          {isAuthenticated ? (\n            <div className=\"flex flex-col items-end gap-2\">\n              <span className=\"rounded-full bg-white/15 px-3 py-1 text-xs font-semibold text-white/85\">\n                {user?.email}\n              </span>\n              <div className=\"flex gap-2\">\n                <Button\n                  variant=\"outline\"\n                  className=\"bg-white/10 text-white hover:bg-white/20\"\n                  onClick={() => setOnboardingComplete(false)}\n                >\n                  Ganti preferensi\n                </Button>\n                <Button variant=\"outline\" className=\"bg-white/10 text-white hover:bg-white/20\" onClick={logout}>\n                  Logout\n                </Button>\n              </div>\n            </div>\n          ) : null}\n        </div>\n      </header>\n\n      <section className=\"flex flex-col gap-4\">\n        {!isAuthenticated ? (\n          <AuthCard />\n        ) : null}\n\n        {!isAuthenticated ? (\n          <div className=\"card border border-slate-200 bg-slate-50 p-5 shadow-card\">\n            <p className=\"text-sm font-semibold text-slate-800\">Masuk untuk membuka latihan</p>\n            <p className=\"text-xs text-slate-500\">\n              Progres, XP, dan streak akan tersimpan setelah kamu login atau daftar.\n            </p>\n          </div>\n        ) : !onboardingComplete ? (\n          <OnboardingPanel />\n        ) : (\n          <div className=\"card border border-slate-100 bg-white p-5 shadow-card\">\n            <div className=\"grid gap-4 md:grid-cols-[1.2fr,0.8fr] md:items-center\">\n              <div className=\"space-y-3\">\n                <div className=\"flex flex-wrap items-center gap-2\">\n                  <span className=\"rounded-full bg-brand-50 px-3 py-1 text-xs font-semibold text-brand-700\">\n                    Step 2\n                  </span>\n                  <p className=\"text-sm font-semibold text-slate-800\">Latihan Inti</p>\n                </div>\n                <p className=\"text-sm text-slate-600\">\n                  Mulai latihan sesuai jalur. Pilih &quot;Final Test&quot; untuk menguji kemampuanmu dan menyesuaikan\n                  jalur belajar. <br></br>\n                  困難は成長の機会だ - Kesulitan adalah kesempatan untuk bertumbuh.\n                </p>\n                <div className=\"flex flex-wrap gap-2\">\n                  <Link href=\"/practice\">\n                    <Button variant=\"primary\" className=\"px-4\">\n                      Buka Latihan Inti\n                    </Button>\n                  </Link>\n                  <Link href=\"/practice?mode=placement\">\n                    <Button variant=\"outline\" className=\"px-4\">\n                      Final Test\n                    </Button>\n                  </Link>\n                  {isN5Track ? (\n                    <Link href=\"/practice?mode=kanji\">\n                      <Button variant=\"outline\" className=\"px-4\">\n                        Latihan Kanji\n                      </Button>\n                    </Link>\n                  ) : null}\n                  <Button variant=\"ghost\" disabled className=\"px-4\">\n                    Audio & Pelafalan (soon)\n                  </Button>\n                  <Link href=\"/dictionary\">\n                    <Button variant=\"outline\" className=\"px-4\">\n                      Kamus\n                    </Button>\n                  </Link>\n                </div>\n              </div>\n              <div className=\"flex items-center justify-center rounded-xl bg-gradient-to-br from-amber-50 via-white to-sky-50 p-4\">\n                <ToriiIllustration />\n              </div>\n            </div>\n          </div>\n        )}\n        {isAuthenticated ? <ProfileSummary /> : null}\n\n        {isAuthenticated ? (\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <Card className=\"space-y-2 border border-slate-100 p-4 shadow-sm\">\n              <div className=\"flex items-center justify-between\">\n                <p className=\"text-sm font-semibold text-slate-800\">Riwayat latihan terbaru</p>\n                <Badge tone=\"info\">{dashboardLoading ? \"Memuat...\" : `${history.length} sesi`}</Badge>\n              </div>\n              {dashboardError ? (\n                <p className=\"text-xs text-amber-700\">Gagal memuat: {dashboardError}</p>\n              ) : null}\n              {history.length ? (\n                <div className=\"space-y-1 text-sm text-slate-700\">\n                  {history.map((h) => (\n                    <div key={h.id} className=\"flex items-center justify-between rounded-lg bg-slate-50 px-3 py-2\">\n                      <span>\n                        {(() => {\n                          const createdAt = h.createdAt || h.created_at || h.CreatedAt;\n                          return createdAt ? new Date(createdAt).toLocaleDateString() : \"Tanggal tidak tersedia\";\n                        })()}\n                      </span>\n                      <span className=\"font-semibold\">{h.score}/{h.total}</span>\n                      <span className=\"text-xs uppercase text-slate-500\">{h.mode}</span>\n                    </div>\n                  ))}\n                </div>\n              ) : dashboardLoading ? (\n                <p className=\"text-xs text-slate-500\">Memuat riwayat...</p>\n              ) : (\n                <p className=\"text-xs text-slate-500\">Belum ada sesi latihan.</p>\n              )}\n            </Card>\n            <Card className=\"space-y-2 border border-slate-100 p-4 shadow-sm\">\n              <div className=\"flex items-center justify-between\">\n                <p className=\"text-sm font-semibold text-slate-800\">Lanjutkan belajar</p>\n                <Badge tone=\"warning\">{profile.track === \"beginner\" ? \"Beginner\" : \"N5\"}</Badge>\n              </div>\n              {dashboardLoading ? (\n                <p className=\"text-xs text-slate-500\">Memuat rekomendasi unit berikut...</p>\n              ) : nextUnit ? (\n                <div className=\"rounded-lg bg-slate-50 px-3 py-2 text-sm\">\n                  <p className=\"font-semibold text-slate-800\">{nextUnit.title}</p>\n                  <p className=\"text-xs text-slate-500\">Unit berikut untuk jalur aktifmu.</p>\n                  <div className=\"mt-2 flex gap-2\">\n                    <Link href=\"/practice\">\n                      <Button variant=\"primary\" className=\"px-3\">Mulai latihan</Button>\n                    </Link>\n                  </div>\n                </div>\n              ) : (\n                <p className=\"text-xs text-slate-500\">Semua unit selesai! Lanjutkan review atau coba placement.</p>\n              )}\n            </Card>\n          </div>\n        ) : null}\n\n        <div className=\"card space-y-4 border border-slate-100 bg-white p-5 shadow-card\">\n          <div className=\"flex flex-wrap items-center justify-between gap-3\">\n            <div>\n              <p className=\"text-sm font-semibold text-slate-800\">Pilih level jalur</p>\n              <p className=\"text-xs text-slate-500\">\n                Beginner = kana; N5 = vocab, grammar, kanji. N4-N1 disiapkan (locked).\n              </p>\n            </div>\n            <span className=\"text-xs rounded-full bg-slate-100 px-4 py-1.5 text-slate-600\">\n              Tip: pilih satu jalur untuk fokus harian.\n            </span>\n          </div>\n          <div className=\"grid grid-cols-2 gap-3 sm:grid-cols-3 lg:grid-cols-6\">\n            {tabs.map((tab) => {\n              const active = levelTab === tab.id;\n              return (\n                <Button\n                  key={tab.id}\n                  disabled={tab.disabled}\n                  variant={active ? \"primary\" : \"outline\"}\n                  className={`h-11 w-full justify-center rounded-full px-4 text-sm font-semibold ${\n                    tab.disabled ? \"cursor-not-allowed\" : \"\"\n                  }`}\n                  onClick={() => !tab.disabled && setLevelTab(tab.id)}\n                >\n                  {tab.label}\n                  {tab.disabled ? \" · locked\" : \"\"}\n                </Button>\n              );\n            })}\n          </div>\n        </div>\n\n        {isAuthenticated ? (\n          levelTab === \"beginner\" || levelTab === \"n5\" ? (\n            <TrackBoard activeTrack={levelTab} />\n          ) : (\n            <div className=\"card border border-dashed border-slate-200 bg-slate-50 text-sm text-slate-600\">\n              Jalur {levelTab.toUpperCase()} akan hadir setelah konten siap.\n            </div>\n          )\n        ) : (\n          <div className=\"card border border-dashed border-slate-200 bg-slate-50 text-sm text-slate-600\">\n            Login untuk melihat unit & materi yang tersedia.\n          </div>\n        )}\n\n        {isAuthenticated ? <FlashcardReview /> : null}\n      </section>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;;;;;;;;;;;;;;;;;;;AAoBe,SAAS;IACtB,MAAM,EAAE,kBAAkB,EAAE,OAAO,EAAE,qBAAqB,EAAE,GAAG,IAAA,iJAAW;IAC1E,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,yIAAO;IACvC,MAAM,WAAW,IAAA,8IAAc;IAC/B,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,gBAAgB,EAAE,OAAO,cAAc,EAAE,GAAG,IAAA,8IAAc,EAAC,CAAC,QAAU,MAAM,SAAS;IACzH,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAEtC;IACF,MAAM,YAAY,QAAQ,KAAK,KAAK;IACpC,MAAM,kBAAkB,QAAQ;IAEhC,MAAM,OAAO,IAAA,gNAAO,EAClB,IAAM;YACJ;gBAAE,IAAI;gBAAY,OAAO;gBAAmB,UAAU;YAAM;YAC5D;gBAAE,IAAI;gBAAM,OAAO;gBAAY,UAAU;YAAM;YAC/C;gBAAE,IAAI;gBAAM,OAAO;gBAAM,UAAU;YAAK;YACxC;gBAAE,IAAI;gBAAM,OAAO;gBAAM,UAAU;YAAK;YACxC;gBAAE,IAAI;gBAAM,OAAO;gBAAM,UAAU;YAAK;YACxC;gBAAE,IAAI;gBAAM,OAAO;gBAAM,UAAU;YAAK;SACzC,EACD,EAAE;IAGJ,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,OAAO;QACZ,SAAS,IAAA,8JAAiB,EAAC;YAAE;YAAO,OAAO,QAAQ,KAAK;QAAC;IAC3D,GAAG;QAAC;QAAU;QAAO,QAAQ,KAAK;KAAC;IAEnC,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC;gBAAO,WAAU;0BAChB,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAU;8CAAgD;;;;;;8CAC7D,8OAAC;oCAAG,WAAU;8CAAiC;;;;;;8CAC/C,8OAAC;oCAAE,WAAU;;wCAAwC;sDACF,8OAAC;;;;;wCAAQ;;;;;;;;;;;;;sCAI9D,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,wIAAK;wCACJ,KAAK,mUAAU;wCACf,KAAI;wCACJ,WAAU;wCACV,OAAM;wCACN,QAAQ;;;;;;;;;;;;;;;;;;;;;wBAKf,gCACC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAK,WAAU;8CACb,MAAM;;;;;;8CAET,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,4IAAM;4CACL,SAAQ;4CACR,WAAU;4CACV,SAAS,IAAM,sBAAsB;sDACtC;;;;;;sDAGD,8OAAC,4IAAM;4CAAC,SAAQ;4CAAU,WAAU;4CAA2C,SAAS;sDAAQ;;;;;;;;;;;;;;;;;mCAKlG;;;;;;;;;;;;0BAIR,8OAAC;gBAAQ,WAAU;;oBAChB,CAAC,gCACA,8OAAC,kJAAQ;;;;+BACP;oBAEH,CAAC,gCACA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAAuC;;;;;;0CACpD,8OAAC;gCAAE,WAAU;0CAAyB;;;;;;;;;;;+BAItC,CAAC,mCACH,8OAAC,sKAAe;;;;6CAEhB,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DAA0E;;;;;;8DAG1F,8OAAC;oDAAE,WAAU;8DAAuC;;;;;;;;;;;;sDAEtD,8OAAC;4CAAE,WAAU;;gDAAyB;8DAErB,8OAAC;;;;;gDAAQ;;;;;;;sDAG1B,8OAAC;4CAAI,WAAU;;8DACb,8OAAC,uKAAI;oDAAC,MAAK;8DACT,cAAA,8OAAC,4IAAM;wDAAC,SAAQ;wDAAU,WAAU;kEAAO;;;;;;;;;;;8DAI7C,8OAAC,uKAAI;oDAAC,MAAK;8DACT,cAAA,8OAAC,4IAAM;wDAAC,SAAQ;wDAAU,WAAU;kEAAO;;;;;;;;;;;gDAI5C,0BACC,8OAAC,uKAAI;oDAAC,MAAK;8DACT,cAAA,8OAAC,4IAAM;wDAAC,SAAQ;wDAAU,WAAU;kEAAO;;;;;;;;;;2DAI3C;8DACJ,8OAAC,4IAAM;oDAAC,SAAQ;oDAAQ,QAAQ;oDAAC,WAAU;8DAAO;;;;;;8DAGlD,8OAAC,uKAAI;oDAAC,MAAK;8DACT,cAAA,8OAAC,4IAAM;wDAAC,SAAQ;wDAAU,WAAU;kEAAO;;;;;;;;;;;;;;;;;;;;;;;8CAMjD,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,iKAAiB;;;;;;;;;;;;;;;;;;;;;oBAKzB,gCAAkB,8OAAC,iKAAc;;;;+BAAM;oBAEvC,gCACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,wIAAI;gCAAC,WAAU;;kDACd,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;0DAAuC;;;;;;0DACpD,8OAAC,0IAAK;gDAAC,MAAK;0DAAQ,mBAAmB,cAAc,GAAG,QAAQ,MAAM,CAAC,KAAK,CAAC;;;;;;;;;;;;oCAE9E,+BACC,8OAAC;wCAAE,WAAU;;4CAAyB;4CAAe;;;;;;+CACnD;oCACH,QAAQ,MAAM,iBACb,8OAAC;wCAAI,WAAU;kDACZ,QAAQ,GAAG,CAAC,CAAC,kBACZ,8OAAC;gDAAe,WAAU;;kEACxB,8OAAC;kEACE,CAAC;4DACA,MAAM,YAAY,EAAE,SAAS,IAAI,EAAE,UAAU,IAAI,EAAE,SAAS;4DAC5D,OAAO,YAAY,IAAI,KAAK,WAAW,kBAAkB,KAAK;wDAChE,CAAC;;;;;;kEAEH,8OAAC;wDAAK,WAAU;;4DAAiB,EAAE,KAAK;4DAAC;4DAAE,EAAE,KAAK;;;;;;;kEAClD,8OAAC;wDAAK,WAAU;kEAAoC,EAAE,IAAI;;;;;;;+CARlD,EAAE,EAAE;;;;;;;;;+CAYhB,iCACF,8OAAC;wCAAE,WAAU;kDAAyB;;;;;6DAEtC,8OAAC;wCAAE,WAAU;kDAAyB;;;;;;;;;;;;0CAG1C,8OAAC,wIAAI;gCAAC,WAAU;;kDACd,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;0DAAuC;;;;;;0DACpD,8OAAC,0IAAK;gDAAC,MAAK;0DAAW,QAAQ,KAAK,KAAK,aAAa,aAAa;;;;;;;;;;;;oCAEpE,iCACC,8OAAC;wCAAE,WAAU;kDAAyB;;;;;+CACpC,yBACF,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;0DAAgC,SAAS,KAAK;;;;;;0DAC3D,8OAAC;gDAAE,WAAU;0DAAyB;;;;;;0DACtC,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC,uKAAI;oDAAC,MAAK;8DACT,cAAA,8OAAC,4IAAM;wDAAC,SAAQ;wDAAU,WAAU;kEAAO;;;;;;;;;;;;;;;;;;;;;6DAKjD,8OAAC;wCAAE,WAAU;kDAAyB;;;;;;;;;;;;;;;;;+BAI1C;kCAEJ,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAE,WAAU;0DAAuC;;;;;;0DACpD,8OAAC;gDAAE,WAAU;0DAAyB;;;;;;;;;;;;kDAIxC,8OAAC;wCAAK,WAAU;kDAA+D;;;;;;;;;;;;0CAIjF,8OAAC;gCAAI,WAAU;0CACZ,KAAK,GAAG,CAAC,CAAC;oCACT,MAAM,SAAS,aAAa,IAAI,EAAE;oCAClC,qBACE,8OAAC,4IAAM;wCAEL,UAAU,IAAI,QAAQ;wCACtB,SAAS,SAAS,YAAY;wCAC9B,WAAW,CAAC,mEAAmE,EAC7E,IAAI,QAAQ,GAAG,uBAAuB,IACtC;wCACF,SAAS,IAAM,CAAC,IAAI,QAAQ,IAAI,YAAY,IAAI,EAAE;;4CAEjD,IAAI,KAAK;4CACT,IAAI,QAAQ,GAAG,cAAc;;uCATzB,IAAI,EAAE;;;;;gCAYjB;;;;;;;;;;;;oBAIH,kBACC,aAAa,cAAc,aAAa,qBACtC,8OAAC,wJAAU;wBAAC,aAAa;;;;;6CAEzB,8OAAC;wBAAI,WAAU;;4BAAgF;4BACtF,SAAS,WAAW;4BAAG;;;;;;6CAIlC,8OAAC;wBAAI,WAAU;kCAAgF;;;;;;oBAKhG,gCAAkB,8OAAC,+JAAe;;;;+BAAM;;;;;;;;;;;;;AAIjD"}}]
}